(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){},126:function(e,t,a){e.exports={"signup-form":"createUser_signup-form__wnsgc",container:"createUser_container__3FmxF",checkmark:"createUser_checkmark__3Xln9"}},144:function(e,t,a){e.exports={"resource-form":"create_resource_resource-form__1x0SN"}},167:function(e,t,a){e.exports=a.p+"static/media/1.05fe5e87.jpeg"},168:function(e,t,a){e.exports={"login-form":"login_login-form__1X4nn",footer:"login_footer__p5wlD",successMessage:"login_successMessage__2Hhyc"}},169:function(e,t,a){e.exports={"course-form":"create_course_course-form__37cqB"}},192:function(e,t,a){e.exports=a(311)},249:function(e,t,a){},251:function(e,t,a){},253:function(e,t,a){},301:function(e,t,a){},303:function(e,t,a){},311:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),i=a.n(o),c=a(15),s=a(36),l=a(18),u=a(20),d=a(25),m=a(17),h=a(24),f=a(378),g=a(361),p=a(364),v=a(312),y=a(383),b=Object(v.a)({breakpoints:{values:{xxs:0,xs:300,lg:800}}}),E=Object(g.a)({button:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"#003E6B",width:"8vw",alignSelf:"center","&:hover":{background:"#5082A7"},"&:focus":{background:"#003E6B","&:hover":{background:"#5082A7"}},textAlign:"right",marginLeft:"30%"},image:{width:80,height:80}});function k(){var e=E();return r.a.createElement("img",{className:e.image,src:a(48),alt:"BCIT",style:{position:"absolute",left:5,top:5}})}function w(){var e=E();return r.a.createElement(f.a,{className:e.button,onClick:function(e){window.location.href="/"}},"Back")}var x=Object(p.a)("div")({width:"100vw",height:"10vh",display:"flex",flexDirection:"column",alignItems:"left",justifyContent:"space-evenly",color:"#003E6B",backgroundColor:"white"}),j=Object(p.a)("div")({width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}),O=(Object(p.a)("div")({}),Object(p.a)("div")({}),function(e){var t=e.title;return r.a.createElement(x,null,r.a.createElement(k,null),r.a.createElement(j,null,r.a.createElement(y.a,{theme:b,sx:{fontSize:{xxs:"11px",xs:"11px",lg:"16px"},marginLeft:{xxs:"60px",xs:"60px"}}},r.a.createElement("h1",{className:"vacation-title"},t)),r.a.createElement(w,null)))});O.defaultProps={title:"Request Vacation"};var I=O,S=a(7),D=a(19),N=Object(p.a)("form")({}),_=Object(g.a)({button:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"#003E6B","&:hover":{background:"#5082A7"},"&:focus":{background:"#003E6B","&:hover":{background:"#5082A7"}},marginTop:10,marginBottom:10}});function A(){var e=_();return r.a.createElement(f.a,{className:e.button,type:"submit"},"Submit")}var C=function(e){var t=e.onAdd,a=Object(n.useState)(""),o=Object(S.a)(a,2),i=(o[0],o[1]),c=Object(n.useState)(""),s=Object(S.a)(c,2),l=(s[0],s[1]),u=Object(n.useState)(""),d=Object(S.a)(u,2),m=(d[0],d[1]),h=Object(n.useState)(""),f=Object(S.a)(h,2),g=(f[0],f[1]);return r.a.createElement(N,{onSubmit:function(e){e.preventDefault(),t(D.ReactSession.get("username")),i(""),l(""),m(""),g("")}},r.a.createElement(A,null))},R=a(111),L=a.n(R),M=(a(130),a(382)),B=a(380),T=a(384),W=a(376);var F=Object(p.a)("div")({display:"flex",flexDirection:"column",alignItems:"left"}),V=Object(p.a)("form")({}),P=function(e){var t=e.onAdd,a=Object(n.useState)(""),o=Object(S.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)(""),l=Object(S.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)(""),h=Object(S.a)(m,2),p=h[0],v=h[1],y=Object(n.useState)(""),b=Object(S.a)(y,2),E=b[0],k=b[1],w=Object(n.useState)(""),x=Object(S.a)(w,2),j=x[0],O=x[1],I=Object(n.useState)(""),D=Object(S.a)(I,2),N=D[0],_=D[1],A=Object(n.useState)(""),C=Object(S.a)(A,2),R=C[0],P=C[1],U=Object(n.useState)(""),J=Object(S.a)(U,2),q=J[0],z=J[1],Y=Object(n.useState)(""),G=Object(S.a)(Y,2),H=G[0],K=G[1],Q=Object(n.useState)([null,null]),X=Object(S.a)(Q,2),Z=X[0],$=X[1],ee=Object(S.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(g.a)({button:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"#003E6B","&:hover":{background:"#5082A7"},"&:focus":{background:"#003E6B","&:hover":{background:"#5082A7"}},marginTop:10,marginBottom:10}});return r.a.createElement(F,null,r.a.createElement(V,{onSubmit:function(e){e.preventDefault(),t({NC:i,startingMonth:u,startingDay:p,endingMonth:E,endingDay:j,day:N,hour:R,VABT:q,notes:H}),c(""),d(""),v(""),k(""),O(""),_(""),P(""),z(""),K("")}},r.a.createElement(T.a,{sx:{m:1,minWidth:120},size:"small"},r.a.createElement(M.a,{id:"demo-simple-select-helper-label"},"NEW/CANCEL"),r.a.createElement(W.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",label:"NEW/CANCEL",onChange:function(e){return c(e.target.value)}},r.a.createElement(B.a,{value:"N",style:{width:"100%"}},"New"),r.a.createElement(B.a,{value:"C",style:{width:"100%"}},"Cancel"))),r.a.createElement("br",null),r.a.createElement("text",null,"Date"),r.a.createElement(L.a,{selectsRange:!0,startDate:te,endDate:ae,onChange:function(e){$(e),d("".concat(e[0].getMonth()+1)),v(e[0].getDate()),k("".concat(e[1].getMonth()+1)),O(e[1].getDate()),_("".concat(function(e,t){var a,n,r=function(e,t,a){return e===t?a:e};a=t-e,a/=864e5;var o=(7-e.getDay())%7;return a=(a-=o+(n=t.getDay()))/7*5,a+=r(o-1,-1,0)+r(n,6,5),Math.ceil(a)}(e[0],e[1])))}}),r.a.createElement(T.a,{sx:{m:1,minWidth:120},size:"small"},r.a.createElement(M.a,{id:"demo-simple-select-helper-label"},"VA/BT"),r.a.createElement(W.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",label:"VA/BT",onChange:function(e){return z(e.target.value)}},r.a.createElement(B.a,{value:"VA",style:{width:"100%"}},"Vacation"),r.a.createElement(B.a,{value:"BT",style:{width:"100%"}},"Banked"))),r.a.createElement("br",null),r.a.createElement("text",null,"Notes on vacation"),r.a.createElement("br",null),r.a.createElement("input",{className:"vacation-input-large",type:"text",placeholder:"...",value:H,onChange:function(e){return K(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(function(){var e=ne();return r.a.createElement(f.a,{className:e.button,type:"submit"},"Add")},null)))},U=a(166),J=a.n(U),q=Object(p.a)("div")({display:"flex",flexDirection:"row",alignItems:"left",border:"1px solid steelblue",width:"fit-content",height:"fit-content"}),z=Object(p.a)("div")({display:"flex",flexDirection:"row"}),Y=Object(p.a)("div")({}),G=Object(g.a)({button:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"#003E6B","&:hover":{background:"#5082A7"},"&:focus":{background:"#003E6B","&:hover":{background:"#5082A7"}},marginTop:10,marginBottom:10},clearButton:{border:0,borderRadius:28,background:"white",color:"red","&:hover":{background:"red",color:"white"}}}),H=function(e){var t=e.vacation,a=e.onDelete;return r.a.createElement(q,null,r.a.createElement(Y,null,r.a.createElement(z,null,r.a.createElement("div",{className:"vacation-grid-box padding-top"},t.NC)),r.a.createElement(z,null,r.a.createElement("div",{className:"vacation-grid-box padding-top"},"Date:",t.startingMonth),r.a.createElement("text",null,"/"),r.a.createElement("div",{className:"vacation-grid-box padding-top"},t.startingDay),r.a.createElement("text",null," ~ "),r.a.createElement("div",{className:"vacation-grid-box padding-top"},t.endingMonth),r.a.createElement("text",null,"/"),r.a.createElement("div",{className:"vacation-grid-box padding-top"},t.endingDay)),r.a.createElement("div",{className:"vacation-grid-box padding-top"},"Days: ",t.day),r.a.createElement("div",{className:"vacation-grid-box padding-top"},"Type: ",t.VABT),r.a.createElement("div",{className:"vacation-grid-box vacation-label-notes padding"},t.notes)),r.a.createElement(f.a,{onClick:function(){return a(t.id)},className:G().clearButton},r.a.createElement(J.a,null)))},K=function(e){var t=e.vacations,a=e.onDelete;return r.a.createElement("div",null,t.map(function(e){return r.a.createElement("div",{key:e.id,className:"vacation-column vacation-inputs"},r.a.createElement(H,{vacation:e,onDelete:a}))}))},Q="http://localhost:8000/",X="users";var Z=Object(v.a)({breakpoints:{values:{xxs:0,xs:300,lg:800}}}),$=(Object(g.a)({button:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"#003E6B",width:"8vw",alignSelf:"center","&:hover":{background:"#5082A7"},"&:focus":{background:"#003E6B","&:hover":{background:"#5082A7"}},textAlign:"right",marginLeft:"30%"},image:{width:80,height:80}}),Object(p.a)("div")({width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"right",color:"darkslategray",backgroundColor:"white"})),ee=Object(p.a)("div")({width:"75%",height:"50%",display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"white",margin:"30px auto",minHeight:"200px",border:"1px solid steelblue",padding:"30px",borderRadius:"5px",textAlign:"left"}),te=Object(p.a)("div")({display:"flex",alignItems:"left",justifyContent:"center",flexDirection:"column"}),ae=Object(p.a)("div")({minWidth:"250px",height:"100%",alignItems:"center",justifyContent:"center",overflowY:"scroll"}),ne=Object(p.a)("div")({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",width:"100%",height:"50%"}),re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:"",users:[],vacations:[],vacationID:0,vacationSubmitted:!1,loaded:!1},a.changeUser=function(e){if(a.state.users.includes(e)){for(var t=a.state.vacations,n=0;n<a.state.vacations.length;n++)t[n]=Object(s.a)({},t[n],{user:e});a.setState({vacations:t}),a.postSubmission(e)}else console.log(e),alert("User is not in database")},a.addVacation=function(e){var t=a.state.vacationID,n=Object(s.a)({id:t},e);a.setState({vacationID:a.state.vacationID+1}),a.setState({vacations:[].concat(Object(c.a)(a.state.vacations),[n])})},a.deleteVacation=function(e){var t=a.state.vacations.findIndex(function(t){return t.id===e});a.setState(a.state.vacations.splice(t,1))},a.createDate=function(e,t){var a=(new Date).getFullYear();return new Date(a,e-1,t)},a.postSubmission=function(e){for(var t=0;t<a.state.vacations.length;t++){var n={id:a.state.vacations[t].id,username:e,start_date:a.createDate(a.state.vacations[t].startingMonth,a.state.vacations[t].startingDay).getTime(),end_date:a.createDate(a.state.vacations[t].endingMonth,a.state.vacations[t].endingDay).getTime(),duration:a.state.vacations[t].day};a.props.socket.emit("vacationAdded",n)}a.setState({vacationID:0}),a.setState({vacationSubmitted:!0}),a.setState({vacations:[]})},a.parseData=function(e){if(!e)return null;for(var t=JSON.parse(e),n=[],r=0;r<t.length;r++)n.push(t[r].username);a.setState({users:n}),a.setState({loaded:!0}),console.log(n)},a.getUsers=function(){fetch(Q+X).then(function(e){return e.text()}).then(function(e){a.parseData(e)})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"renderApp",value:function(){return void 0!==D.ReactSession.get("admin")?r.a.createElement($,null,r.a.createElement(I,null),r.a.createElement(ee,{theme:Z,sx:{height:{xxs:"100%",xs:"75%",lg:"50%"}}},r.a.createElement(ne,{theme:Z,sx:{flexDirection:{xxs:"column",xs:"column",lg:"row"},height:{xxs:"80%",xs:"80%",lg:"50%"}}},r.a.createElement(te,null,r.a.createElement(P,{onAdd:this.addVacation}),r.a.createElement(C,{onAdd:this.changeUser}),this.state.vacationSubmitted?r.a.createElement("div",{className:"vacation-submission-true"},"Request submitted successfully"):""),r.a.createElement(ae,{theme:Z,sx:{alignItems:{xxs:"left"}}},this.state.vacations.length>0?r.a.createElement(K,{vacations:this.state.vacations,onDelete:this.deleteVacation}):r.a.createElement("text",null,"No vacations added"))))):window.location.href="/"}},{key:"render",value:function(){return this.state.loaded?this.renderApp():r.a.createElement("span",null,"Loading data...")}}]),t}(r.a.Component),oe=(a(249),a(251),a(253),a(34)),ie=a(385),ce=a(375),se=a(116),le=a.n(se),ue=a(115),de=a.n(ue);function me(e){var t=e.title,a=(e.socket,e.position),n=e.weeks,o=e.next,i=e.previous,c=e.currentYear;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-month",style:{gridArea:a.x+" / "+a.y+" / span 1 / span "+n.length}},r.a.createElement(ce.a,{direction:"row",spacing:0},r.a.createElement(ie.a,{"aria-label":"back",onClick:i},r.a.createElement(de.a,null)),r.a.createElement("h2",{className:"grid-header"},t),r.a.createElement(ie.a,{"aria-label":"next",onClick:o},r.a.createElement(le.a,null)),r.a.createElement("h2",{className:"grid-header"},c))),n.map(function(e,n){return r.a.createElement("div",{key:t+e,className:"grid-day",style:{gridArea:a.x+1+" / "+(a.y+n)+" / span 1 / span 1"}},e)}))}var he=a(22),fe=a.n(he),ge=a(9),pe=a(174),ve=function(e){fetch("http://localhost:8000/courses").then(function(e){return e.text()}).then(function(t){e(function(e){if(!e)return null;var t=JSON.parse(e);console.log(t);for(var a=[],n=0;n<t.length;n++){var r={value:t[n].course_num,label:t[n].title};a.push(r)}return a}(t))})};function ye(e){var t=e.title,a=e.textObject,o=e.callBack,i=e.isCourse,c=void 0!==i&&i,l=Object(n.useState)({}),u=Object(S.a)(l,2),d=u[0],m=u[1],h=Object(n.useState)(null),f=Object(S.a)(h,2),g=f[0],p=f[1],v=Object(n.useState)(!1),y=Object(S.a)(v,2),b=y[0],E=y[1],k=Object(n.useState)([]),w=Object(S.a)(k,2),x=w[0],j=w[1];Object(n.useEffect)(function(){c?ve(function(e){j(e),E(!0)}):E(!0)},[]);return r.a.createElement(r.a.Fragment,null,b?r.a.createElement("div",{key:t+" div",style:{display:"inline",position:"sticky"}},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{name:"Course",key:"course label"},"Course"),r.a.createElement(pe.a,{defaultValue:g,onChange:p,options:x})):void 0,a.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e+" container"},r.a.createElement("label",{name:e+" label",key:e+" label"},e),r.a.createElement("input",{name:e+" input",key:e+" input",onInput:function(t){return m(Object(s.a)({},d,Object(ge.a)({},e.split(" ").join("").toLowerCase(),t.target.value)))}}),r.a.createElement("br",null))}),c?r.a.createElement("button",{name:t+" button",key:t+" button",onClick:function(){return o(Object(s.a)({number:g.value,title:g.label},d,{datejoined:(new Date).getTime()}))}},"Submit"):r.a.createElement("button",{name:t+" button",key:t+" button",onClick:function(){return o(Object(s.a)({},d,{datejoined:(new Date).getTime()}))}},"Submit")):r.a.createElement("p",null,"Loading"))}var be=a(117);function Ee(e){var t=e.name,a=e.position,n=e.createCourse;return r.a.createElement("div",{className:"grid-slot",style:{position:"relative",gridArea:a.x+" / "+a.y+" / span 1 / span 1"}},n&&r.a.createElement(be.a,{trigger:r.a.createElement("button",{name:"".concat(t," slot ").concat(a.y),style:{opacity:0,height:"100%",width:"100%",position:"absolute",zIndex:99},onClick:function(){console.log("CLICKCLACK")}}),modal:!0},r.a.createElement("div",{className:"add-row-modal-bg"},r.a.createElement(ye,{text:"Add Row: ",title:"course",textObject:["Week Length","Color"],isCourse:!0,callBack:function(e){return n(e,a.y-3,a.x-1)}})," ")))}function ke(e){var t=e.position,a=e.text,n=e.width,o=e.height,i=e.removeFunction,c=e.createCourse,s=function(){for(var e=[],r=0;r<n;r++)for(var i=0;i<o;i++)e.push({key:a+"x:"+(t.x+i)+"y:"+(t.y+r),pos:{x:t.x+i,y:t.y+r+2}});return e}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-row-header",style:{gridArea:t.x+" / "+t.y+" / span 2 / span 2"}},1===D.ReactSession.get("admin")?r.a.createElement("button",{name:a+" remove",className:"grid-row-header-close",onClick:i},r.a.createElement("p",null,"Remove")):void 0,r.a.createElement("p",null,a)),s.map(function(e,t){return function(e,t){return r.a.createElement(Ee,{key:e.key,position:{x:e.pos.x,y:e.pos.y},createCourse:e.pos.x%2===1?c:null,name:a})}(e)}))}function we(e){var t=e.socket,a=e.heightLimit,o=e.instructorArray,i=e.createCourse,s=e.totalWeeks,l=e.onRemoveUser,u=e.onAddUser,d=o,m=Object(n.useState)(204*d.length),h=Object(S.a)(m,2),f=h[0],g=h[1],p=Object(n.useState)(d),v=Object(S.a)(p,2),y=v[0],b=v[1],E=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b(function(t){return fe.a.reject(t,function(t){return t.key===e})}),g(function(e){return e-204}),a.set(2*(y.length-1)),l(e,n-1),r&&t.emit("userDeleted",e,n)};return Object(n.useEffect)(function(){t.on("userAdded",function(e,n){console.log("Added: "+JSON.stringify(e)),function(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?(b(function(t){return[].concat(Object(c.a)(t),[{key:e.username,name:e.firstname+" "+e.lastname,timeblocks:[],vacations:[]}])}),a.set(2*(y.length+1)),g(function(e){return e+204}),u(e)):t.emit("userAdded",e)}(e,!1,n)}),t.on("userDeleted",function(e,t){console.log(t),console.log(e),E(e,t,!1)})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-container-layout",style:{height:f}},y.map(function(e,a){return function(e,a){var n=2*a+1;return r.a.createElement(ke,{key:e.key+"rowHeader"+a,socket:t,text:e.name,position:{x:n,y:1},width:s,height:2,removeFunction:function(){E(e.key,n)},createCourse:i})}(e,a)})))}var xe=a(35),je=a(63),Oe=a.n(je),Ie=function(e){function t(e){var a,n=e.props,r=e.socket,o=e.heightLimit,i=e.newInstructorArray,u=e.weekInformation,h=e.totalWeeks,f=(e.firstWeek,e.currentMonthWeeks),g=e.currentMonth;e.year;Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).replaceItem=function(e){for(var t=0;t<a.state.layout.length;t++)if(a.state.layout[t].i===e.i){var n=a.state.layout.slice();n[t]=e,a.setState({layout:n});break}},a.onLayoutChange=function(e){a.setState({layout:e})},a.onItemChange=function(e,t,n){var r=Ne(a.state.weekInformation,n.x),o=Ne(a.state.weekInformation,n.w+n.x-1),i=fe.a.findIndex(a.monthItems,function(e){return e.data.i.toString()===n.i}),c=a.monthItems[i],s=n;s.y=t.y,a.replaceItem(s);var l=a.state.instructorArray[Math.floor(n.y/2)];a.socket.emit("itemChanged",s,{username:l.key,courseNum:c.courseNum,caId:c.caId,start:r.getTime(),end:o.getTime()})},a.onAddVacation=function(e){var t=De(a.state.weekInformation,new Date(e.start_date)),n=De(a.state.weekInformation,new Date(e.end_date))+1,r=fe.a.findIndex(a.state.instructorArray,function(t){return t.key===e.username}),o={text:e.username+"'s Vacation",uid:e.username,vid:e.vacation_id,data:{i:e.username+e.vacation_id,x:t,y:2*r+1,w:n-t,h:1}};a.setState({items:a.state.items.concat(o)})},a.onAddCourse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=parseInt(e.weeklength);console.log(t);var i=Ne(a.state.weekInformation,t+a.props.firstWeek),c=Ne(a.state.weekInformation,o+t+a.props.firstWeek),l=a.state.instructorArray[Math.floor(n/2)],u=De(a.state.weekInformation,i),d=De(a.state.weekInformation,c);void 0!==l&&(r?a.socket.emit("courseAdded",Object(s.a)({},e,{x:t,y:n,instructorKey:l.key,courseNum:e.number,start:i.getTime(),end:c.getTime()})):a.setState({items:a.state.items.concat({start:u,end:d,text:e.title,userId:l.key,courseNum:e.number,caId:e.caId,data:{i:e.caId,x:t,y:n,w:o,h:1}})}),console.log(a.state.items))},a.onRemoveUser=function(e,t){var n=a.state.instructorArray.length;a.setState({instructorArray:fe.a.reject(a.state.instructorArray,function(t){return t.key===e})},function(){a.state.instructorArray.length!==n&&(console.log("Removed items at: "+t),a.setState({items:fe.a.reject(a.state.items,function(e){return e.data.y===t||e.data.y===t+1})},function(){console.log(a.state.items),a.setState({items:fe.a.reduce(a.state.items,function(e,a){if(a.data.y>t){var n=a;return n.data.y-=2,[].concat(Object(c.a)(e),[n])}return[].concat(Object(c.a)(e),[a])},[])},function(){a.setState({layout:fe.a.reduce(a.state.items,function(e,t){if(void 0!==t.vid){var a=Object(s.a)({},t.data,{isDraggable:!1,isResizable:!1});return[].concat(Object(c.a)(e),[a])}var n=t.data;return[].concat(Object(c.a)(e),[n])},[])}),console.log(a.state.layout)})}))})},a.onAddUser=function(e){a.setState({instructorArray:[].concat(Object(c.a)(a.state.instructorArray),[{key:e.username,name:e.firstname+" "+e.lastname,timeblocks:[],vacations:[]}])})},a.resize=function(){return a.forceUpdate()};var p=u.weekRangesArray[g];return a.state={items:i.reduce(function(e,t,a){return 0===t.timeblocks.length&&0===t.vacations.length||0===u.length?e:e.concat(t.timeblocks.map(function(e){var t=De(u,e.start),n=De(u,e.end);console.log("start, end",t,n);var r=Se(t,n,u,p);return{start:t,end:n,text:e.name,caId:e.caId,userId:e.userId,courseNum:e.courseNum,data:{i:e.caId,x:t,y:2*a,w:r,h:1}}})).concat(t.vacations.map(function(e){var t=De(u,e.vacationStart),n=De(u,e.vacationEnd)+1,r=Se(t,n,u,p);return{start:t,end:n,text:e.userId+"'s Vacation",uid:e.userId,vid:e.vacationId,data:{i:e.userId+e.vacationId,x:t,y:2*a+1,w:r,h:1}}}))},[]),heightLimit:o.get,weekInformation:u,instructorArray:i,monthWeeks:f},a.socket=r,a.heightLimit=o,a.totalWeeks=h,a.mWeeks=f,a.monthItems=a.state.items.filter(function(e){return 0!==Se(e.start,e.end,u,p)}),a.itemLayout=[],a.socket.on("itemChanged",function(e){console.log("Item Received: "+JSON.stringify(e)),a.replaceItem(e)}),a.socket.on("courseAdded",function(e){console.log("Item Received: "+JSON.stringify(e));var t=new Date(e.start),n=12*(t.getFullYear()-a.props.year);t.setMonth(t.getMonth()-n),e.start=t.getTime(),a.onAddCourse(e,parseInt(e.x),parseInt(e.y),!1)}),a.socket.on("courseDeleted",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onRemoveItem(e,!1)}),a.socket.on("vacationApproved",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onAddVacation(e)}),a.socket.on("vacationDeleted",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onRemoveVacation(e.vacation_id,!1)}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onRemoveItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=fe.a.findIndex(this.state.items,function(t){return t.data.i===e}),n=this.state.items[a];t&&this.socket.emit("courseDeleted",n,e),this.setState({items:fe.a.reject(this.state.items,function(t){return t.data.i===e})})}},{key:"onRemoveVacation",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.socket.emit("vacationDeleted",{vacation_id:e}),this.setState({items:fe.a.reject(this.state.items,function(t){return t.vid===e})})}},{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&arguments[2];return r.a.createElement("div",{key:e.data.i,"data-grid":t?Object(s.a)({},e.data,{isDraggable:!1,isResizable:!1}):e.data,name:e.text+" el"},r.a.createElement("span",{className:"text"},e.text),1===D.ReactSession.get("admin")?r.a.createElement("span",{className:"remove",style:{position:"absolute",right:"2px",top:0,cursor:"pointer",padding:"5px",color:"black"},onClick:t?this.onRemoveVacation.bind(this,e.vid):this.onRemoveItem.bind(this,e.data.i)},"x"):void 0,t||1!==D.ReactSession.get("admin")?void 0:r.a.createElement(xe.b,{to:{pathname:"/detailed-schedule",search:"?courseNum="+e.courseNum}},r.a.createElement("span",{className:"remove",style:{position:"absolute",left:"2px",bottom:0,cursor:"pointer",padding:"5px",color:"black"}},"Detailed")))}},{key:"createItemGrid",value:function(e){var t=this,a=Object(je.WidthProvider)(Oe.a);return this.updateItems(),r.a.createElement(a,Object.assign({},e,{cols:this.props.currentMonthWeeks,maxRows:this.state.heightLimit(),layout:this.state.layout,isDraggable:void 0!==D.ReactSession.get("admin"),isResizable:void 0!==D.ReactSession.get("admin"),autoSize:!0}),this.monthItems.map(function(e){return t.createElement(e,void 0!==e.vid,t.props.currentMonthWeeks)}))}},{key:"componentDidUpdate",value:function(e,t){this.props.weekInformation.weekRangesArray[this.props.currentMonth].month!==e.weekInformation.weekRangesArray[this.props.currentMonth].month&&this.onLayoutChange(this.itemLayout)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize)}},{key:"updateItems",value:function(){var e=this,t=[],a=this.state.items.filter(function(t){return 0!==Se(t.start,t.end,e.props.weekInformation,e.props.weekInformation.weekRangesArray[e.props.currentMonth])});return a.forEach(function(a){var n=Se(a.start,a.end,e.props.weekInformation,e.props.weekInformation.weekRangesArray[e.props.currentMonth]);a.data.w=n,a.data.i=a.data.i.toString(),a.data.maxW=e.props.currentMonthWeeks,t.push(a.data)}),this.monthItems=a,this.itemLayout=t,t}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{socket:this.socket,heightLimit:this.heightLimit,instructorArray:this.state.instructorArray,createCourse:this.onAddCourse,totalWeeks:this.props.currentMonthWeeks,onRemoveUser:this.onRemoveUser,onAddUser:this.onAddUser}),r.a.createElement("div",{className:"grid-item-container",style:{width:102*this.props.currentMonthWeeks,position:"absolute"}},this.createItemGrid(this.props)))}}]),t}(r.a.PureComponent);function Se(e,t,a,n){var r=De(a,n.times[0].date),o=De(a,n.times[n.times.length-1].date),i=fe.a.range(e,t),c=fe.a.range(r,o+1);return i.filter(function(e){return c.includes(e)}).length}function De(e,t){for(var a=t.getMonth(),n=e.weekRangesArray[a].times,r=0;r<n.length;r++)if(t<=n[r].date)return n[r].index;return n[n.length-1].index}function Ne(e,t){return e.indexMap[t]}Ie.defaultProps={className:"layout",rowHeight:100,margin:[2,2],allowOverlap:!0,preventCollision:!1,resizeHandles:["e"],compactType:null,autoSize:!0};a(105);function _e(){localStorage.clear()}var Ae=function(e){e.title;return r.a.createElement("ul",{className:"nav-ul"},r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"/create_user"},"Create User")),r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"/create_course"},"Create Course")),r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"/create_resource"},"Create Resource")),r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"/vacation"},"Request Vacation")),r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"/vacationApproval"},"Approve Vacation")),r.a.createElement("li",{className:"nav-li_logout",id:"logout",onMouseDown:_e},r.a.createElement("a",{href:"/"},"Logout")))};Ae.defaultProps={title:"Admin Nav"};var Ce=Ae;function Re(){localStorage.clear()}var Le=function(e){e.title;return r.a.createElement("ul",{className:"nav-ul"},r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"/vacation"},"Request Vacation")),r.a.createElement("li",{className:"nav-li",id:"logout",onMouseDown:Re},r.a.createElement("a",{href:"/"},"Logout")))};Le.defaultProps={title:"Admin Nav"};var Me=Le,Be=function(e){e.title;return r.a.createElement("ul",{className:"nav-ul"},r.a.createElement("li",{className:"nav-li",id:"login"},r.a.createElement("a",{href:"/login"},"Login")))};Be.defaultProps={title:"Default Nav"};var Te=Be,We=Object(je.WidthProvider)(Oe.a),Fe=function(e){function t(e){var a,n=e.props,r=e.socket,o=e.heightLimit,i=e.newInstructorArray,u=e.weekInformation,h=e.totalWeeks;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).replaceItem=function(e){for(var t=0;t<a.state.layout.length;t++)if(a.state.layout[t].i===e.i){var n=a.state.layout.slice();n[t]=e,a.setState({layout:n});break}},a.onLayoutChange=function(e,t){a.setState({layout:e})},a.onItemChange=function(e,t,n){var r=Pe(a.state.weekInformation,n.x),o=Pe(a.state.weekInformation,n.w+n.x-1),i=fe.a.findIndex(a.state.items,function(e){return e.data.i.toString()===n.i}),c=a.state.items[i],s=n;s.y=t.y,a.replaceItem(s);var l=a.state.instructorArray[Math.floor(n.y/2)];a.socket.emit("itemChanged",s,{username:l.key,courseNum:c.courseNum,caId:c.caId,start:r.getTime(),end:o.getTime()})},a.onAddVacation=function(e){var t=Ve(a.state.weekInformation,new Date(e.start_date)),n=Ve(a.state.weekInformation,new Date(e.end_date))+1,r=fe.a.findIndex(a.state.instructorArray,function(t){return t.key===e.username}),o={text:e.username+"'s Vacation",uid:e.username,vid:e.vacation_id,data:{i:e.username+e.vacation_id,x:t,y:2*r+1,w:n-t,h:1}};a.setState({items:a.state.items.concat(o)})},a.onAddCourse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=parseInt(e.weeklength),i=Pe(a.state.weekInformation,t),c=Pe(a.state.weekInformation,o+t-1),l=a.state.instructorArray[Math.floor(n/2)];void 0!==l&&(r?a.socket.emit("courseAdded",Object(s.a)({},e,{x:t,y:n,instructorKey:l.key,courseNum:e.number,start:i.getTime(),end:c.getTime()})):a.setState({items:a.state.items.concat({text:e.title,userId:l.key,courseNum:e.number,caId:e.caId,data:{i:e.caId,x:t,y:n,w:o,h:1}})}))},a.onRemoveUser=function(e,t){var n=a.state.instructorArray.length;a.setState({instructorArray:fe.a.reject(a.state.instructorArray,function(t){return t.key===e})},function(){a.state.instructorArray.length!==n&&(console.log("Removed items at: "+t),a.setState({items:fe.a.reject(a.state.items,function(e){return e.data.y===t||e.data.y===t+1})},function(){console.log(a.state.items),a.setState({items:fe.a.reduce(a.state.items,function(e,a){if(a.data.y>t){var n=a;return n.data.y-=2,[].concat(Object(c.a)(e),[n])}return[].concat(Object(c.a)(e),[a])},[])},function(){a.setState({layout:fe.a.reduce(a.state.items,function(e,t){if(void 0!==t.vid){var a=Object(s.a)({},t.data,{isDraggable:!1,isResizable:!1});return[].concat(Object(c.a)(e),[a])}var n=t.data;return[].concat(Object(c.a)(e),[n])},[])}),console.log(a.state.layout)})}))})},a.onAddUser=function(e){a.setState({instructorArray:[].concat(Object(c.a)(a.state.instructorArray),[{key:e.username,name:e.firstname+" "+e.lastname,timeblocks:[],vacations:[]}])})},a.state={items:i.reduce(function(e,t,a){return 0===t.timeblocks.length&&0===t.vacations.length||0===u.length?e:e.concat(t.timeblocks.map(function(e){var t=Ve(u,e.start),n=Ve(u,e.end)+1;return{text:e.name,caId:e.caId,userId:e.userId,courseNum:e.courseNum,data:{i:e.caId,x:t,y:2*a,w:n-t,h:1}}})).concat(t.vacations.map(function(e){var t=Ve(u,e.vacationStart),n=Ve(u,e.vacationEnd)+1;return{text:e.userId+"'s Vacation",uid:e.userId,vid:e.vacationId,data:{i:e.userId+e.vacationId,x:t,y:2*a+1,w:n-t,h:1}}}))},[]),heightLimit:o.get,weekInformation:u,instructorArray:i},a.socket=r,a.heightLimit=o,a.totalWeeks=h,a.socket.on("itemChanged",function(e){console.log("Item Received: "+JSON.stringify(e)),a.replaceItem(e)}),a.socket.on("courseAdded",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onAddCourse(e,parseInt(e.x),parseInt(e.y),!1)}),a.socket.on("courseDeleted",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onRemoveItem(e,!1)}),a.socket.on("vacationApproved",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onAddVacation(e)}),a.socket.on("vacationDeleted",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onRemoveVacation(e.vacation_id,!1)}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onRemoveItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=fe.a.findIndex(this.state.items,function(t){return t.data.i===e}),n=this.state.items[a];t&&this.socket.emit("courseDeleted",n,e),this.setState({items:fe.a.reject(this.state.items,function(t){return t.data.i===e})})}},{key:"onRemoveVacation",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.socket.emit("vacationDeleted",{vacation_id:e}),this.setState({items:fe.a.reject(this.state.items,function(t){return t.vid===e})})}},{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.a.createElement("div",{key:e.data.i,"data-grid":t?Object(s.a)({},e.data,{isDraggable:!1,isResizable:!1}):e.data,name:e.text+" el"},r.a.createElement("span",{className:"text"},e.text),1===D.ReactSession.get("admin")?r.a.createElement("span",{className:"remove",style:{position:"absolute",right:"2px",top:0,cursor:"pointer",padding:"5px",color:"black"},onClick:t?this.onRemoveVacation.bind(this,e.vid):this.onRemoveItem.bind(this,e.data.i)},"x"):void 0,t||1!==D.ReactSession.get("admin")?void 0:r.a.createElement(xe.b,{to:{pathname:"/detailed-schedule",search:"?courseNum="+e.courseNum}},r.a.createElement("span",{className:"remove",style:{position:"absolute",left:"2px",bottom:0,cursor:"pointer",padding:"5px",color:"black"}},"Detailed")))}},{key:"render",value:function(){var e=this;return console.log(this.props.weekInformation),console.log(this.state.items),console.log(this.totalWeeks),r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{socket:this.socket,heightLimit:this.heightLimit,instructorArray:this.state.instructorArray,createCourse:this.onAddCourse,totalWeeks:this.totalWeeks,onRemoveUser:this.onRemoveUser,onAddUser:this.onAddUser}),r.a.createElement("div",{className:"grid-item-container",style:{width:102*this.totalWeeks,position:"absolute"}},r.a.createElement(We,Object.assign({},this.props,{cols:this.totalWeeks,maxRows:this.state.heightLimit(),layout:this.state.layout,onLayoutChange:this.onLayoutChange,onResizeStop:this.onItemChange,onDragStop:this.onItemChange,isDraggable:void 0!==D.ReactSession.get("admin"),isResizable:void 0!==D.ReactSession.get("admin")}),this.state.items.map(function(t){return e.createElement(t,void 0!==t.vid)}))))}}]),t}(r.a.PureComponent);function Ve(e,t){for(var a=t.getMonth(),n=e.weekRangesArray[a].times,r=0;r<n.length;r++)if(t<=n[r].date)return n[r].index;return n[n.length-1].index}function Pe(e,t){return e.indexMap[t]}function Ue(e){var t=e.name,a=e.position,n=e.createCourse;return r.a.createElement("div",{className:"grid-slot",style:{position:"relative",gridArea:a.x+" / "+a.y+" / span 1 / span 1"}},n&&r.a.createElement(be.a,{trigger:r.a.createElement("button",{name:"".concat(t," slot ").concat(a.y),style:{opacity:0,height:"100%",width:"100%",position:"absolute",zIndex:99},onClick:function(){console.log("CLICKCLACK")}}),modal:!0},r.a.createElement("div",{className:"add-row-modal-bg"},r.a.createElement(ye,{text:"Add Row: ",title:"course",textObject:["Day Length","Color"],isCourse:!0,callBack:function(e){return n(e,a.y-3,a.x-1)}})," ")))}function Je(e){var t=e.position,a=e.text,n=e.width,o=e.height,i=e.removeFunction,c=e.createCourse,s=function(){for(var e=[],r=0;r<n;r++)for(var i=0;i<o;i++)e.push({key:a+"x:"+(t.x+i)+"y:"+(t.y+r),pos:{x:t.x+i,y:t.y+r+2}});return e}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-row-header",style:{gridArea:t.x+" / "+t.y+" / span 3 / span 2"}},1===D.ReactSession.get("admin")?r.a.createElement("button",{name:a+" remove",className:"grid-row-header-close",onClick:i},r.a.createElement("p",null,"Remove")):void 0,r.a.createElement("p",null,a)),s.map(function(e,t){return function(e,t){return r.a.createElement(Ue,{key:e.key,position:{x:e.pos.x,y:e.pos.y},createCourse:e.pos.x%3!=0?c:null,name:a})}(e)}))}function qe(e){var t=e.socket,a=e.heightLimit,o=e.instructorArray,i=e.createCourse,s=e.totalWeeks,l=e.onRemoveUser,u=e.onAddUser,d=o,m=Object(n.useState)(204*d.length),h=Object(S.a)(m,2),f=h[0],g=h[1],p=Object(n.useState)(d),v=Object(S.a)(p,2),y=v[0],b=v[1],E=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b(function(t){return fe.a.reject(t,function(t){return t.key===e})}),g(function(e){return e-204}),a.set(3*(y.length-1)),l(e,n-1),r&&t.emit("userDeleted",e,n)};return Object(n.useEffect)(function(){t.on("userAdded",function(e,n){console.log("Added: "+JSON.stringify(e)),function(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?(b(function(t){return[].concat(Object(c.a)(t),[{key:e.username,name:e.firstname+" "+e.lastname,timeblocks:[],vacations:[]}])}),a.set(3*(y.length+1)),g(function(e){return e+204}),u(e)):t.emit("userAdded",e)}(e,!1,n)}),t.on("userDeleted",function(e,t){console.log(t),console.log(e),E(e,t,!1)})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-container-layout-weeks",style:{height:f}},y.map(function(e,a){return function(e,a){var n=3*a+1;return r.a.createElement(Je,{key:e.key+"rowHeader"+a,socket:t,text:e.name,position:{x:n,y:1},width:s,height:3,removeFunction:function(){E(e.key,n)},createCourse:i})}(e,a)})))}Fe.defaultProps={className:"layout",rowHeight:100,margin:[2,2],allowOverlap:!0,preventCollision:!1,resizeHandles:["e"],compactType:null,autoSize:!0};a(279);var ze=function(e){function t(e){var a,n=e.props,r=e.socket,o=e.heightLimit,i=e.newInstructorArray,u=e.weekInformation,h=e.totalWeeks,f=(e.firstWeek,e.firstDate,e.currentWeekDays),g=e.currentMonth,p=e.currentWeek,v=e.currentDate;e.year;Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).replaceItem=function(e){for(var t=0;t<a.state.layout.length;t++)if(a.state.layout[t].i===e.i){var n=a.state.layout.slice();n[t]=e,a.setState({layout:n});break}},a.onLayoutChange=function(e){a.setState({layout:e})},a.onItemChange=function(e,t,n){var r=Ke(a.state.weekInformation,n.x),o=Ke(a.state.weekInformation,n.w+n.x-1),i=fe.a.findIndex(a.monthItems,function(e){return e.data.i.toString()===n.i}),c=a.monthItems[i],s=n;s.y=t.y,a.replaceItem(s);var l=a.state.instructorArray[Math.floor(n.y/3)];a.socket.emit("itemChanged",s,{username:l.key,courseNum:c.courseNum,caId:c.caId,start:r.getTime(),end:o.getTime()})},a.onAddVacation=function(e){var t=Ge(a.state.current_date,new Date(e.start_date)),n=Ge(a.state.current_date,new Date(e.end_date))+1,r=fe.a.findIndex(a.state.instructorArray,function(t){return t.key===e.username}),o={text:e.username+"'s Vacation",uid:e.username,vid:e.vacation_id,data:{i:e.username+e.vacation_id,x:t,y:3*r+1,w:n-t,h:1}};a.setState({items:a.state.items.concat(o)})},a.onAddCourse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=parseInt(e.daylength),i=o+t-1,c=He(t,a.props.currentDate,a.props.firstDate),l=He(i,a.props.currentDate,a.props.firstDate),u=a.state.instructorArray[Math.floor(n/3)],d=Ge(a.props.currentDate,c),m=Ge(a.props.currentDate,l)+1;console.log(d,m);var h=0;n%3===1&&(h=1),void 0!==u&&(r?a.socket.emit("courseAdded",Object(s.a)({},e,{x:t,y:n,instructorKey:u.key,courseNum:e.number,start:c.getTime(),end:l.getTime(),m_or_a:h})):a.setState({items:a.state.items.concat({start:d,end:m,text:e.title,userId:u.key,courseNum:e.number,caId:e.caId,data:{i:e.caId,x:t,y:n,w:o,h:1}})}))},a.onRemoveUser=function(e,t){var n=a.state.instructorArray.length;a.setState({instructorArray:fe.a.reject(a.state.instructorArray,function(t){return t.key===e})},function(){a.state.instructorArray.length!==n&&(console.log("Removed items at: "+t),a.setState({items:fe.a.reject(a.state.items,function(e){return e.data.y===t||e.data.y===t+1})},function(){a.setState({items:fe.a.reduce(a.state.items,function(e,a){if(a.data.y>t){var n=a;return n.data.y-=3,[].concat(Object(c.a)(e),[n])}return[].concat(Object(c.a)(e),[a])},[])},function(){a.setState({layout:fe.a.reduce(a.state.items,function(e,t){if(void 0!==t.vid){var a=Object(s.a)({},t.data,{isDraggable:!1,isResizable:!1});return[].concat(Object(c.a)(e),[a])}var n=t.data;return[].concat(Object(c.a)(e),[n])},[])})})}))})},a.onAddUser=function(e){a.setState({instructorArray:[].concat(Object(c.a)(a.state.instructorArray),[{key:e.username,name:e.firstname+" "+e.lastname,timeblocks:[],vacations:[]}])})},a.resize=function(){return a.forceUpdate()};var y=u.weekRangesArray[g];return a.state={items:i.reduce(function(e,t,a){return 0===t.timeblocks.length&&0===t.vacations.length||0===u.length?e:e.concat(t.timeblocks.map(function(e){var t=Ge(v,e.start),n=Ge(v,e.end)+1,r=Ye(t,n,v),o=e.mOrA;return{start:t,end:n,text:e.name,caId:e.caId,userId:e.userId,courseNum:e.courseNum,data:{i:e.caId,x:t%7,y:3*a+o,w:r%7,h:1}}})).concat(t.vacations.map(function(e){var t=Ge(v,e.vacationStart),n=Ge(v,e.vacationEnd)+1,r=Ye(t,n,u,y,v);return{start:t,end:n,text:e.userId+"'s Vacation",uid:e.userId,vid:e.vacationId,data:{i:e.userId+e.vacationId,x:t,y:3*a+1,w:r,h:1}}}))},[]),heightLimit:o.get,weekInformation:u,instructorArray:i,currentWeekDays:f,firstWeek:p,currentWeek:p},a.firstDate=v,a.socket=r,a.heightLimit=o,a.totalWeeks=h,a.mWeeks=f,a.monthItems=a.state.items.filter(function(e){var t=Ye(e.start,e.end,v);return console.log("monthItems is called"),0!==t}),a.itemLayout=[],a.socket.on("itemChanged",function(e){console.log("Item Received: "+JSON.stringify(e)),a.replaceItem(e)}),a.socket.on("courseAdded",function(e){console.log("Item Received: "+JSON.stringify(e));var t=new Date(e.start),n=12*(t.getFullYear()-a.props.year);t.setMonth(t.getMonth()-n),e.start=t.getTime(),a.onAddCourse(e,parseInt(e.x),parseInt(e.y),!1)}),a.socket.on("courseDeleted",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onRemoveItem(e,!1)}),a.socket.on("vacationApproved",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onAddVacation(e)}),a.socket.on("vacationDeleted",function(e){console.log("Item Received: "+JSON.stringify(e)),a.onRemoveVacation(e.vacation_id,!1)}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onRemoveItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=fe.a.findIndex(this.state.items,function(t){return t.data.i===e}),n=this.state.items[a];t&&this.socket.emit("courseDeleted",n,e),this.setState({items:fe.a.reject(this.state.items,function(t){return t.data.i===e})})}},{key:"onRemoveVacation",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.socket.emit("vacationDeleted",{vacation_id:e}),this.setState({items:fe.a.reject(this.state.items,function(t){return t.vid===e})})}},{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&arguments[2];return r.a.createElement("div",{key:e.data.i,"data-grid":t?Object(s.a)({},e.data,{isDraggable:!1,isResizable:!1}):e.data,name:e.text+" el"},r.a.createElement("span",{className:"text"},e.text),void 0!==D.ReactSession.get("admin")?r.a.createElement("span",{className:"remove",style:{position:"absolute",right:"2px",top:0,cursor:"pointer",padding:"5px",color:"black"},onClick:t?this.onRemoveVacation.bind(this,e.vid):this.onRemoveItem.bind(this,e.data.i)},"x"):void 0,t||void 0===D.ReactSession.get("admin")?void 0:r.a.createElement(xe.b,{to:{pathname:"/detailed-schedule",search:"?courseNum="+e.courseNum}},r.a.createElement("span",{className:"remove",style:{position:"absolute",left:"2px",bottom:0,cursor:"pointer",padding:"5px",color:"black"}},"Detailed")))}},{key:"createItemGrid",value:function(e){var t=this,a=Object(je.WidthProvider)(Oe.a);return this.updateItems(),r.a.createElement(a,Object.assign({},e,{cols:this.props.currentWeekDays,maxRows:this.state.heightLimit(),layout:this.state.layout,isDraggable:void 0!==D.ReactSession.get("admin"),isResizable:void 0!==D.ReactSession.get("admin"),autoSize:!0}),this.monthItems.map(function(e){return t.createElement(e,void 0!==e.vid,t.props.currentWeekDays)}))}},{key:"componentDidUpdate",value:function(e,t){console.log("yo from componentDidChange"),this.props.weekInformation.weekRangesArray[this.props.currentMonth].month!==e.weekInformation.weekRangesArray[this.props.currentMonth].month&&this.onLayoutChange(this.itemLayout)}},{key:"componentDidUpdate",value:function(e,t){this.props.current_date!==e.current_date&&this.onLayoutChange(this.itemLayout)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize)}},{key:"updateItems",value:function(){var e=this,t=[],a=this.state.items.filter(function(t){return 0!==Ye(t.start,t.end,e.props.currentDate,e.firstDate)});return a.forEach(function(a){var n=Ye(a.start,a.end,e.props.currentDate,e.firstDate);a.data.w=n,a.data.i=a.data.i.toString(),a.data.maxW=e.props.currentWeekDays,t.push(a.data)}),this.monthItems=a,this.itemLayout=t,t}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,{socket:this.socket,heightLimit:this.heightLimit,instructorArray:this.state.instructorArray,createCourse:this.onAddCourse,totalWeeks:this.props.currentWeekDays,onRemoveUser:this.onRemoveUser,onAddUser:this.onAddUser}),r.a.createElement("div",{className:"grid-item-container-week",style:{width:178*this.props.currentWeekDays,position:"absolute"}},this.createItemGrid(this.props)))}}]),t}(r.a.PureComponent);function Ye(e,t,a){var n=function(e,t){var a=new Date(e).getDate(),n=a+4;if("undefined"!==typeof t&&"nothing :D"!==t){var r=Ge(t,e),o=Ge(t,e)+4;return[r,o]}return[a,n]}(a,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nothing :D"),r=Object(S.a)(n,2),o=r[0],i=r[1],c=fe.a.range(e,t),s=fe.a.range(o,i+1);return c.filter(function(e){return s.includes(e)}).length}function Ge(e,t){return Math.round((t.getTime()-e.getTime())/864e5)}function He(e,t,a){var n=new Date(t);return n.setDate(n.getDate()+parseInt(e)),n}function Ke(e,t,a){return e.indexMap[t]}function Qe(e){var t=e.title,a=(e.socket,e.position),n=e.weeks;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-month",style:{gridArea:a.x+" / "+a.y+" / span 1 / span "+n.length}},r.a.createElement("h2",{className:"grid-header"},t)),n.map(function(e,n){return r.a.createElement("div",{key:t+e,className:"grid-day",style:{gridArea:a.x+1+" / "+(a.y+n)+" / span 1 / span 1"}},e)}))}function Xe(e){var t=e.title,a=(e.socket,e.position),n=e.next,o=e.previous,i=e.currentYear,c=e.current_date,s=e.current_month,l=(e.setCurrentDate,e.setCurrentMonth,e.setYear,["January","February","March","April","May","June","July","August","September","October","November","December"]),u=new Date(c),d=["Monday","Tuesday","Wednesday","Thursday","Friday"].map(function(e){var t=String(e+"  "+String(u.getDate()));return u.setDate(u.getDate()+1),t});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-month",style:{gridArea:a.x+" / "+a.y+" / span 1 / span "+d.length}},r.a.createElement(ce.a,{direction:"row",justifyContent:"space-evenly",spacing:1},r.a.createElement(ie.a,{"aria-label":"back",onClick:o},r.a.createElement(de.a,null)),r.a.createElement("h2",{className:"grid-header"},function(e,t){new Date(e);var a=new Date(e);a.setDate(e.getDate()+4);var n=a.getMonth(),r=e.getMonth();return console.log(l[t]+" - "+l[0]),n!=r?11===t?l[t]+" - "+l[0]:l[t]+" - "+l[t+1]:r!=r?11===t?l[0]:l[t+1]:l[t]}(c,s)),r.a.createElement(ie.a,{"aria-label":"next",onClick:n},r.a.createElement(le.a,null)),r.a.createElement("h2",{className:"grid-header"},i))),d.map(function(e,n){return r.a.createElement("div",{key:t+e,className:"grid-day",style:{gridArea:a.x+1+" / "+(a.y+n)+" / span 1 / span 1"}},e)}))}function Ze(){Ze=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),i=new x(n||[]);return o._invoke=function(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return O()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=E(i,a);if(c){if(c===u)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=l(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}(e,a,i),o}function l(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var u={};function d(){}function m(){}function h(){}var f={};c(f,r,function(){return this});var g=Object.getPrototypeOf,p=g&&g(g(j([])));p&&p!==t&&a.call(p,r)&&(f=p);var v=h.prototype=d.prototype=Object.create(f);function y(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(r,o){function i(){return new t(function(n,i){!function n(r,o,i,c){var s=l(e[r],e,o);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(d).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(s.arg)}(r,o,n,i)})}return n=n?n.then(i,i):i()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=h,c(v,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,o,function(){return this}),e.AsyncIterator=b,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new b(s(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then(function(e){return e.done?e.value:i.next()})},y(v),c(v,i,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}function $e(e){var t=e.userStatus;return 1===t?r.a.createElement(Ce,null):0===t?r.a.createElement(Me,null):r.a.createElement(Te,null)}function et(e){var t=e.socket,a=e.heightLimit,o=e.instructorArray,i=Object(n.useState)(2022),c=Object(S.a)(i,2),s=c[0],l=c[1],u=new Date;u.setFullYear(s,0,3);new Date("Jan 01, 2022 00:00:00");var d={weekNum:0,weekRangesArray:[],indexMap:{}},m=re(u),h=Object(n.useState)(m),f=Object(S.a)(h,2),g=f[0],p=f[1],v=["January","February","March","April","May","June","July","August","September","October","November","December"],y=function(){for(var e=[0],t=0;t<12;t++){var a=d.weekRangesArray[t].times.length+e[t];e.push(a)}return e}(),b=Object(n.useState)(g),E=Object(S.a)(b,1)[0],k=Object(n.useState)(0),w=Object(S.a)(k,2),x=w[0],j=w[1],O=Object(n.useState)(v[x]),I=Object(S.a)(O,2),N=I[0],_=(I[1],Object(n.useState)(0)),A=Object(S.a)(_,2),C=A[0],R=(A[1],Object(n.useState)([5,4,4,5,4,4,5,4,4,5][x])),L=Object(S.a)(R,2),F=L[0],V=L[1],P=Object(n.useState)(y[0]),U=Object(S.a)(P,2),J=U[0],q=U[1],z=Object(n.useState)(new Date("Jan 03, 2022 00:00:00")),Y=Object(S.a)(z,2),G=Y[0],H=(Y[1],Object(n.useState)("Week")),K=Object(S.a)(H,2),Q=K[0],X=K[1],Z=Object(n.useState)(new Date("Jan 03, 2022 00:00:00")),$=Object(S.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(["Monday 3","Tuesday 4","Wednesday 5","Thursday 6","Friday 7"]),ne=Object(S.a)(ae,2);ne[0],ne[1];function re(e){return Array.from(Array(12).keys()).map(function(t,a){return{monthIndex:a,weeks:tt(e,a,d)}})}for(var ie=0,ce=0;ce<E.length;ce++)ie+=E[ce].weeks.length;function se(){var e=new Date(ee);e.setMonth(x+1),e.setDate(1),console.log("d1",e),1!=e.getDay()&&(0==e.getDay()?(e.setDate(2),console.log("d2",e)):(console.log("7-d.getDay()",7-e.getDay()),e.setDate(9-e.getDay()))),11===x?(l(s+1),u.setFullYear(s,0,1),u.setMonth(u.getMonth()+12),p(re(u)),j(0),V(d.weekRangesArray[0].times.length),q(y[0])):(j(x+1),V(d.weekRangesArray[x+1].times.length),q(y[x+1])),console.log("d",e),te(e)}function le(){var e=new Date(ee);e.setMonth(x-1),e.setDate(1),console.log("d1",e),1!=e.getDay()&&(0==e.getDay()?(e.setDate(2),console.log("d2",e)):(console.log("7-d.getDay()",7-e.getDay()),e.setDate(9-e.getDay()))),0===x?(l(s-1),u.setMonth(u.getMonth()-12),p(re(u)),j(11),V(d.weekRangesArray[11].times.length),q(y[11])):(j(x-1),V(d.weekRangesArray[x-1].times.length),q(y[x-1])),te(e)}var ue=function(){var e=Object(oe.a)(Ze().mark(function e(){var t;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=new Date(ee)).setDate(t.getDate()+7),te(t),j(t.getMonth()),l(t.getFullYear());case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function de(){var e=new Date(ee);e.setDate(e.getDate()-7),te(e),j(e.getMonth()),l(e.getFullYear())}var he=function(e){X(e.target.value)},fe=function(){return r.a.createElement("div",null,r.a.createElement(T.a,{sx:{m:1,minWidth:80}},r.a.createElement(M.a,{id:"display-select-label"},"View"),r.a.createElement(W.a,{labelId:"display-select-label",id:"display-select",value:Q,onChange:he,autoWidth:!0,label:"Display"},r.a.createElement(B.a,{value:"Week"},"Week"),r.a.createElement(B.a,{value:"Year"},"Year"),r.a.createElement(B.a,{value:"Month"},"Month"))))};return"Month"===Q?r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{userStatus:D.ReactSession.get("admin")}),r.a.createElement("div",{className:"grid-container-months"},fe(),function(e,t){return r.a.createElement(me,{key:v[e.monthIndex]+" month",title:v[e.monthIndex],position:{x:1,y:0===t?t+3:at(g,t)+3},weeks:e.weeks,next:se,previous:le,currentYear:s})}(E[x])),r.a.createElement(Ie,{socket:t,heightLimit:a,newInstructorArray:o,weekInformation:d,totalWeeks:ie,firstDate:new Date("Jan 03, 2022 00:00:00"),currentMonthWeeks:F,currentMonth:x,year:s})):"Week"===Q?r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{userStatus:D.ReactSession.get("admin")}),r.a.createElement("div",{className:"grid-container-weeks"},fe(),function(e,t){return r.a.createElement(Xe,{key:v[x]+" month",title:N,first_week:J,position:{x:1,y:0===t?t+3:3},setCurrentDate:te,setCurrentMonth:j,next:ue,previous:de,currentYear:s,current_date:ee,current_month:x})}(0,E[x])),r.a.createElement(ze,{socket:t,heightLimit:a,newInstructorArray:o,weekInformation:d,totalWeeks:7,currentDate:ee,firstWeek:J,firstDate:G,currentWeekDays:5,currentMonth:x,currentWeek:C,year:s})):"Year"===Q?r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{userStatus:D.ReactSession.get("admin")}),r.a.createElement("div",{className:"grid-container-months"},fe(),E.map(function(e,t){return function(e,t){return r.a.createElement(Qe,{key:v[e.monthIndex]+" month",title:v[e.monthIndex],position:{x:1,y:0===t?t+3:at(m,t)+3},weeks:e.weeks})}(e,t)})),r.a.createElement(Fe,{socket:t,heightLimit:a,newInstructorArray:o,weekInformation:d,totalWeeks:ie})):void 0}function tt(e,t,a){for(var n=[],r={month:e.getMonth(),times:[]};e.getMonth()===t;){var o=a.weekNum+n.length,i=new Date(e.getTime());r.times.push({index:o,date:i}),a.indexMap[o]=i,n.push(e.getDate()),e.setDate(e.getDate()+7)}return a.weekRangesArray.push(r),a.weekNum+=n.length,n}function at(e,t){for(var a=0,n=t-1;n>=0;n--)a+=e[n].weeks.length;return a}ze.defaultProps={className:"layout",rowHeight:78.25,margin:[2,2],allowOverlap:!0,preventCollision:!1,resizeHandles:["e"],compactType:null,autoSize:!0};var nt="http://127.0.0.1:8000/",rt="users",ot=function(e){function t(e){var a,n=e.socket;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).state={instructors:[],heightLimit:8,loaded:!1,error:""},a.parseData=function(e){if(!e)return null;for(var t=JSON.parse(e),n={},r=0;r<t.length;r++){var o=t[r].username,i=void 0;n[o]?i=n[o]:((i={}).timeblocks=[],i.vacations=[],i.name=t[r].first_name+" "+t[r].last_name,i.key=o,n[o]=i),null!=t[r].start_date&&null!=t[r].end_date&&i.timeblocks.push({start:new Date(t[r].start_date),end:new Date(t[r].end_date),name:t[r].title,courseNum:t[r].course_num,caId:t[r].ca_id,userId:t[r].username,mOrA:t[r].m_or_a}),null!=t[r].vacation_start&&null!=t[r].vacation_end&&1===t[r].approved&&i.vacations.push({vacationId:t[r].vacation_id,userId:t[r].username,vacationStart:new Date(t[r].vacation_start),vacationEnd:new Date(t[r].vacation_end)})}n=Object.values(n),a.setState({instructors:n,heightLimit:2*(n.length+1)}),a.setState({loaded:!0})},a.retrieveInstructorDataFromDatabase=function(){fetch(nt+rt).then(function(e){return e.text()}).then(function(e){a.parseData(e)})},a.socket=n,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"getHeightLimit",value:function(){return this.state.heightLimit}},{key:"setHeightLimit",value:function(e){this.setState({heightLimit:e}),console.log("HeightLimit: "+this.state.heightLimit)}},{key:"componentDidMount",value:function(){this.retrieveInstructorDataFromDatabase()}},{key:"removeElement",value:function(e){console.log(e)}},{key:"renderApp",value:function(){var e=this;return r.a.createElement("div",{className:"App"},""!==this.state.error?r.a.createElement("div",{className:"error-modal",key:"errorModal"},r.a.createElement("h1",null,"Error:"),r.a.createElement("p",null,this.state.error),r.a.createElement("button",{style:{position:"absolute",top:0,right:0},onClick:function(){e.setState({error:""})}},r.a.createElement("p",null,"X"))):void 0,r.a.createElement(et,{socket:this.socket,heightLimit:{get:function(){return e.getHeightLimit()},set:function(t){return e.setHeightLimit(t)}},instructorArray:this.state.instructors}))}},{key:"render",value:function(){var e=this;return this.socket.on("error",function(t){console.log(t),typeof t===String?e.setState({error:t}):void 0===t.detail?e.setState({error:"ERROR Code: "+t.code}):e.setState({error:t.detail})}),this.state.loaded?this.renderApp():r.a.createElement("span",null,"Loading data...")}}]),t}(r.a.Component),it=a(125),ct=(a(159),a(301),Object(v.a)({breakpoints:{values:{xxs:0,xs:300,lg:800}}})),st=Object(g.a)({button:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"#003E6B",width:"8vw",alignSelf:"center","&:hover":{background:"#5082A7"},"&:focus":{background:"#003E6B","&:hover":{background:"#5082A7"}},textAlign:"right",marginLeft:"30%"},image:{width:80,height:80}});function lt(){var e=st();return r.a.createElement("img",{className:e.image,src:a(48),alt:"BCIT",style:{position:"absolute",left:5,top:5}})}function ut(){var e=st();return r.a.createElement(f.a,{className:e.button,onClick:function(e){window.location.href="/"}},"Back")}var dt=Object(p.a)("div")({width:"100vw",height:"10vh",display:"flex",flexDirection:"column",alignItems:"left",justifyContent:"space-evenly",color:"#003E6B",backgroundColor:"white"}),mt=Object(p.a)("div")({width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}),ht=(Object(p.a)("div")({}),Object(p.a)("div")({}),function(e){var t=e.title;return r.a.createElement(dt,null,r.a.createElement(lt,null),r.a.createElement(mt,null,r.a.createElement(y.a,{theme:ct,sx:{fontSize:{xxs:"11px",xs:"11px",lg:"16px"},marginLeft:{xxs:"60px",xs:"60px"}}},r.a.createElement("h1",{className:"details-title"},t)),r.a.createElement(ut,null)))});ht.defaultProps={title:"Course Details"};var ft=ht,gt="http://localhost:8000/",pt=function(e){function t(e){var a,n=e.props,r=e.info,o=e.socket;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).handleSave=function(e){e.name;var t=e.value;e.previousValue;a.setState({description:t},function(){a.socket.emit("changeDay",{ca_id:a.ca_id,course:a.course,date:a.date.getTime(),description:a.state.description,ds_id:a.ds_id,model_name:a.state.model_name,model_num:a.state.model_num,quantity:a.state.quantity,subject:a.subject,username:a.instructor})})},a.state={description:r.description,model_num:r.model_num,model_name:r.model_name,quantity:r.quantity},a.ca_id=r.ca_id,a.course=r.course,a.date=r.date,a.ds_id=r.ds_id,a.subject=r.subject,a.instructor=r.username,a.socket=o,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=(this.state.editMode,null);return this.state.model_num&&(t=this.state.model_num.map(function(t,a){return r.a.createElement("li",{key:t},"".concat(e.state.model_name[a]," - ").concat(e.state.quantity[a]))})),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(it.a,{name:"date",defaultValue:Et(this.date),readonly:!0})),r.a.createElement("td",null,r.a.createElement(it.a,{name:"instructor",defaultValue:this.instructor?this.instructor:"No instructor assigned",readonly:!0})),r.a.createElement("td",{class:"course-desc"},r.a.createElement(it.b,{name:"description",defaultValue:this.state.description&&"null"!==this.state.description?this.state.description:"",onSave:this.handleSave,rows:2})),r.a.createElement("td",null,r.a.createElement("ul",null,t,this.instructor?r.a.createElement("li",null,r.a.createElement(xe.b,{className:"li-link-to-res",to:{pathname:"/resources",search:"?ds_id=".concat(this.ds_id,"&date=").concat(this.date)}},"Book")):null)))}}]),t}(r.a.Component),vt=function(e){function t(e){var a,n=e.props,r=e.info,o=e.socket;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).state={days:r},a.socket=o,a.socket.on("changeDay",function(e){var t;e.date=new Date(e.date);for(var n=0;n<a.state.days.length;n++)if(a.state.days[n].ds_id===e.ds_id){t=n;break}var r=a.state.days.slice();r[t]=e,console.log(e),a.setState({days:fe.a.reduce(r,function(e,t){var a=t;return[].concat(Object(c.a)(e),[a])},[])})}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderDay",value:function(e){return r.a.createElement(pt,{key:e.ds_id+e.username+e.description,info:e,socket:this.socket})}},{key:"render",value:function(){var e=this,t=this.state.days.map(function(t,a){return e.renderDay(t)});return r.a.createElement("table",{key:this.state.days[0].ds_id},r.a.createElement("caption",null,"Schedule for week of ",Et(this.state.days[0].date)),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Instructor"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Resources"))),r.a.createElement("tbody",null,t))}}]),t}(r.a.Component),yt=function(e){function t(e){var a,n=e.props,r=e.socket,o=e.courseNum;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).parseData=function(e){if(!e)return null;for(var t=JSON.parse(e),n=0;n<t.rows.length;n++)t.rows[n].date=new Date(t.rows[n].date);for(var r=[],o=0,i=null,c=0;c<t.rows.length;c++)t.rows[c].model_name?i===t.rows[c].ds_id?(r[o-1].model_name.push(t.rows[c].model_name),r[o-1].model_num.push(t.rows[c].model_num),r[o-1].quantity.push(t.rows[c].quantity)):o=r.push({ca_id:t.rows[c].ca_id,course:t.rows[c].course,date:t.rows[c].date,description:t.rows[c].description,ds_id:t.rows[c].ds_id,model_name:[t.rows[c].model_name],model_num:[t.rows[c].model_num],quantity:[t.rows[c].quantity],subject:t.rows[c].subject,username:t.rows[c].username}):o=r.push(t.rows[c]),i=t.rows[c].ds_id;console.log(r),a.setState({data:r}),a.setState({dataLoaded:!0})},a.retrieveDailyScheduleDataFromDatabase=function(e){fetch(gt+"detailedSchedule?courseNum=".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.text()}).then(function(e){a.parseData(e)})},a.socket=r,a.state={data:null,dataLoaded:!1},a.courseNum=o,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderWeek",value:function(e){return r.a.createElement(vt,{key:e[0].ds_id,info:e,socket:this.socket})}},{key:"renderCourse",value:function(){for(var e=this,t=new Array,a=0,n=this.state.data.length;a<n;a+=7)t.push(this.state.data.slice(a,a+7));var o=t.map(function(t,a){return e.renderWeek(t)});return r.a.createElement("div",null,r.a.createElement(ft,null),r.a.createElement("h2",null,"".concat(this.state.data[0].subject," - ").concat(this.state.data[0].course)),r.a.createElement("br",null),o)}},{key:"componentDidMount",value:function(){this.retrieveDailyScheduleDataFromDatabase(this.courseNum)}},{key:"render",value:function(){return D.ReactSession.get("admin")>=0?this.state.dataLoaded?this.renderCourse():r.a.createElement("span",null,"Loading data..."):window.location.href="/"}}]),t}(r.a.Component),bt=function(e){var t=Object(xe.c)(),a=Object(S.a)(t,2),n=a[0];a[1];return r.a.createElement(yt,{socket:e.socket,courseNum:n.get("courseNum")})};function Et(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getDate()}a(303);var kt="http://localhost:8000/",wt=function(e){function t(e){var a,n=e.props,r=e.socket,o=e.toggle,i=e.resInfo,c=e.ds_id;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).handleClose=function(){a.toggle()},a.handleSubmit=function(){console.log(a.quantityAvailable),a.props.toggle(),isNaN(a.state.inputValue)?alert("Please enter a number"):a.state.inputValue>a.quantityAvailable?alert("Not enough items are available!"):a.state.inputValue<=0?alert("Invalid number"):(alert("Succesfully booked ".concat(a.state.inputValue," ").concat(a.resInfo.model_name)),a.socket.emit("bookResource",{ds_id:a.ds_id,model_num:a.resInfo.model_num,model_name:a.resInfo.model_name,quantity_total:a.resInfo.quantity_total,model_location:a.resInfo.model_location,q_left:a.quantityAvailable-a.state.inputValue,quantity_booked:a.state.inputValue}))},a.updateInputValue=function(e){a.setState({inputValue:e.target.value})},a.state={inputValue:0},a.resInfo=i,a.toggle=o,a.socket=r,a.quantityAvailable=i.q_left,a.ds_id=c,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal_content"},r.a.createElement("span",{className:"close",onClick:this.handleClose},"\xd7"),r.a.createElement("form",null,r.a.createElement("label",{id:"popUpLabel"},"Number of Items:",r.a.createElement("input",{type:"text",name:"count",value:this.state.inputValue,onChange:function(t){return e.updateInputValue(t)}})),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",onClick:this.handleSubmit}))))}}]),t}(n.Component),xt=function(e){function t(e){var a,n=e.props,r=e.socket,o=e.resInfo,i=e.ds_id;return Object(l.a)(this,t),console.log(o),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).togglePop=function(){a.setState({seen:!a.state.seen})},a.resInfo=o,a.state={seen:!1},a.socket=r,a.ds_id=i,a.resInfo.q_left=null!=a.resInfo.q_left?a.resInfo.q_left:a.resInfo.quantity_total,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("p",null,this.resInfo.model_name)),r.a.createElement("td",null,r.a.createElement("p",null,this.resInfo.quantity_total)),r.a.createElement("td",null,r.a.createElement("p",null,this.resInfo.q_left)),r.a.createElement("td",null,r.a.createElement("p",null,this.resInfo.model_location)),r.a.createElement("td",{id:"popUpBookBtn"},this.state.seen?null:r.a.createElement("button",{onClick:function(){return e.togglePop()}},"Book"),this.state.seen?r.a.createElement(wt,{toggle:this.togglePop,resInfo:this.resInfo,socket:this.socket,ds_id:this.ds_id}):null))}}]),t}(r.a.Component),jt=function(e){function t(e){var a,n=e.props,r=e.socket,o=e.date,i=e.ds_id;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,n))).parseData=function(e){if(!e)return null;var t=JSON.parse(e);a.setState({data:t.rows}),a.setState({dataLoaded:!0})},a.retrieveResourcesDataFromDatabase=function(e){fetch(kt+"resources?date=".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.text()}).then(function(e){a.parseData(e)})},a.socket=r,a.state={data:null,dataLoaded:!1},a.date=o,a.ds_id=i,a.socket.on("bookResource",function(e){for(var t,n=0;n<a.state.data.length;n++)if(a.state.data[n].model_num===e.model_num){t=n;break}var r=a.state.data.slice();r[t]=e,a.setState({data:fe.a.reduce(r,function(e,t){var a=t;return[].concat(Object(c.a)(e),[a])},[])})}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderItem",value:function(e){return r.a.createElement(xt,{resInfo:e,key:e.model_num+e.q_left,socket:this.socket,ds_id:this.ds_id})}},{key:"renderResouce",value:function(){var e=this,t=this.state.data.map(function(t,a){return e.renderItem(t)});return r.a.createElement("table",null,r.a.createElement("caption",null,"Available Resources"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Total Quantity"),r.a.createElement("th",null,"Available Quantity"),r.a.createElement("th",null,"location"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t))}},{key:"componentDidMount",value:function(){this.retrieveResourcesDataFromDatabase(this.date)}},{key:"render",value:function(){return D.ReactSession.get("admin")>=0?this.state.dataLoaded?this.renderResouce():r.a.createElement("span",null,"Loading data..."):window.location.href="/"}}]),t}(r.a.Component),Ot=function(e){var t=Object(xe.c)(),a=Object(S.a)(t,2),n=a[0],o=(a[1],n.get("ds_id")),i=new Date(n.get("date")),c="".concat(i.getFullYear(),"-").concat(i.getMonth()+1,"-").concat(i.getDate());return console.log(c),console.log(o),r.a.createElement(jt,{socket:e.socket,ds_id:o,date:c})},It=a(167),St=a.n(It),Dt=a(48),Nt=a.n(Dt),_t=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{href:"https://www.bcit.ca/copyright/"},r.a.createElement("text",null,"Copyright")),"\xa0 \xa0 \xa0",r.a.createElement("a",{href:"https://www.bcit.ca/privacy/"},r.a.createElement("text",null,"Privacy")))},At=a(168),Ct=a.n(At);function Rt(){Rt=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),i=new x(n||[]);return o._invoke=function(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return O()}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var c=E(i,a);if(c){if(c===u)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=l(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}(e,a,i),o}function l(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var u={};function d(){}function m(){}function h(){}var f={};c(f,r,function(){return this});var g=Object.getPrototypeOf,p=g&&g(g(j([])));p&&p!==t&&a.call(p,r)&&(f=p);var v=h.prototype=d.prototype=Object.create(f);function y(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(r,o){function i(){return new t(function(n,i){!function n(r,o,i,c){var s=l(e[r],e,o);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(d).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(s.arg)}(r,o,n,i)})}return n=n?n.then(i,i):i()}}function E(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=h,c(v,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,o,function(){return this}),e.AsyncIterator=b,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var i=new b(s(t,a,n,r),o);return e.isGeneratorFunction(a)?i:i.next().then(function(e){return e.done?e.value:i.next()})},y(v),c(v,i,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return i.type="throw",i.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),w(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;w(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}function Lt(){var e=Object(n.useState)(""),t=Object(S.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(""),c=Object(S.a)(i,2),s=c[0],l=c[1],u=function(){var e=Object(oe.a)(Rt().mark(function e(t){var n,r,o;return Rt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.preventDefault(),r={username:a,password:s},o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=6,fetch("http://localhost:3000/login",o).then(function(e){return e.json()}).then(function(e){return n=e});case 6:console.log(n.status),200===n.status?(D.ReactSession.set("username",n.username),D.ReactSession.set("first_name",n.first_name),D.ReactSession.set("last_name",n.last_name),D.ReactSession.set("admin",n.admin),window.location.href="/"):(document.getElementById("successMessage").innerText="Incorrect username or password!",document.getElementById("successMessage").style.color="Yellow",document.getElementById("successMessage").style.fontWeight="Bold");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){document.body.style.backgroundImage="url('".concat(St.a,"')"),document.body.style.backgroundSize="cover"},[]),r.a.createElement("div",{className:"backgroundPic"},r.a.createElement("form",{onSubmit:u,className:Ct.a["login-form"]},r.a.createElement("div",{align:"center"},r.a.createElement("img",{src:Nt.a,alt:"logo",height:"150",width:"170"})),r.a.createElement("h2",null,"Account Login"),r.a.createElement("label",null,r.a.createElement("br",null)),r.a.createElement("label",null,r.a.createElement("span",null,r.a.createElement("b",null,"Username:")),r.a.createElement("input",{type:"username",placeholder:"Username",value:a,onChange:function(e){return o(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,r.a.createElement("b",null,"Password:")),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return l(e.target.value)},value:s})),r.a.createElement("button",{className:"btn"},"Login"),r.a.createElement("div",{id:"successMessage"})),r.a.createElement("center",null,r.a.createElement(_t,null)))}var Mt=a(126),Bt=a.n(Mt);function Tt(e){e=e.socket;var t=Object(n.useState)(""),a=Object(S.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),s=Object(S.a)(c,2),l=s[0],u=s[1],d=Object(n.useState)(""),m=Object(S.a)(d,2),h=m[0],f=m[1],g=Object(n.useState)(""),p=Object(S.a)(g,2),v=p[0],y=p[1],b=Object(n.useState)(""),E=Object(S.a)(b,2),k=E[0],w=E[1],x=Object(n.useState)(""),j=Object(S.a)(x,2),O=j[0],I=j[1],N=Object(n.useState)(""),_=Object(S.a)(N,2),A=_[0],C=_[1];return 1===D.ReactSession.get("admin")?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null),r.a.createElement("label",null,r.a.createElement("br",null)),r.a.createElement("div",{align:"center"},r.a.createElement(xe.b,{to:"/"},r.a.createElement("img",{src:Nt.a,alt:"logo",height:"150",width:"170"}))),r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),document.getElementById("successMessage").style.color="Red",document.getElementById("successMessage").style.fontWeight="Bold",o)if(l&&h)if(k)if(O===A){var a=new Date,n="".concat(a.getFullYear(),"-").concat(a.getMonth()+1,"-").concat(a.getDate()),r={username:o,firstname:l,lastname:h,datejoined:n,admin:v?1:0,email:k,password:O};e.emit("userAdded",r,null),e.on("userAdded",function(e){document.getElementById("successMessage").innerText="User successfully created."}),e.on("error",function(e){document.getElementById("successMessage").innerText="An error has occured! Please check your inputs."})}else document.getElementById("successMessage").innerText="Password does not match confirmed password.";else document.getElementById("successMessage").innerText="Please enter an email address.";else document.getElementById("successMessage").innerText="Please enter a first and last name.";else document.getElementById("successMessage").innerText="Please enter a user name."},className:Bt.a["signup-form"]},r.a.createElement("h2",null,"Create User"),r.a.createElement("label",null,r.a.createElement("span",null,"Username:"),r.a.createElement("input",{type:"text",placeholder:"FirstName_LastName",onChange:function(e){return i(e.target.value)},value:o})),r.a.createElement("label",null,r.a.createElement("span",null,"First Name:"),r.a.createElement("input",{type:"text",placeholder:"First Name...",onChange:function(e){return u(e.target.value)},value:l})),r.a.createElement("label",null,r.a.createElement("span",null,"Last Name:"),r.a.createElement("input",{type:"text",placeholder:"Last Name...",onChange:function(e){return f(e.target.value)},value:h})),r.a.createElement("label",{className:Bt.a.container},r.a.createElement("span",null,"Admin:"),r.a.createElement("input",{type:"checkbox",value:v,onChange:function(e){return y(e.target.checked)}}),r.a.createElement("span",{className:Bt.a.checkmark})),r.a.createElement("label",null,r.a.createElement("span",null,"Email:"),r.a.createElement("input",{type:"email",placeholder:"Email...",onChange:function(e){return w(e.target.value)},value:k})),r.a.createElement("label",null,r.a.createElement("span",null,"Password:"),r.a.createElement("input",{type:"password",placeholder:"Password...",onChange:function(e){return I(e.target.value)},value:O})),r.a.createElement("label",null,r.a.createElement("span",null,"Confirm Password:"),r.a.createElement("input",{type:"password",placeholder:"Confirm password...",onChange:function(e){return C(e.target.value)},value:A})),r.a.createElement("button",{className:"btn"},"Create User"),r.a.createElement("p",{id:"successMessage"}))):window.location.href="/"}var Wt=a(169),Ft=a.n(Wt);var Vt=function(e){e=e.socket;var t=Object(n.useState)(""),a=Object(S.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),s=Object(S.a)(c,2),l=s[0],u=s[1],d=Object(n.useState)(""),m=Object(S.a)(d,2),h=m[0],f=m[1],g=Object(n.useState)([null,null]),p=Object(S.a)(g,2),v=p[0],y=p[1],b=Object(S.a)(v,2),E=b[0],k=b[1];return 1===D.ReactSession.get("admin")?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null),r.a.createElement("label",null,r.a.createElement("br",null)),r.a.createElement("div",{align:"center"},r.a.createElement(xe.b,{to:"/"},r.a.createElement("img",{src:Nt.a,alt:"logo",height:"150",width:"170"}))),r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),document.getElementById("successMessage").style.color="Red",document.getElementById("successMessage").style.fontWeight="Bold",o&&!isNaN(o))if(l)if(h)if(v[0]&&v[1]){var a={course_num:o,subject:l,course:o,title:h,start_date:"".concat(v[0].getFullYear(),"-").concat(v[0].getMonth()+1,"-").concat(v[0].getDate()),end_date:"".concat(v[1].getFullYear(),"-").concat(v[1].getMonth()+1,"-").concat(v[1].getDate()),colour:""};e.emit("courseAdded1",a),console.log("CreateCourse.js\tcourse_created!"),e.on("courseAdded1",function(e){document.getElementById("successMessage").innerText="Course successfully created.",document.getElementById("successMessage").style.color="Green",document.getElementById("successMessage").style.fontWeight="Bold"}),e.on("error",function(e){document.getElementById("successMessage").innerText="An error has occured! Please check your inputs.",document.getElementById("successMessage").style.color="Red",document.getElementById("successMessage").style.fontWeight="Bold"})}else document.getElementById("successMessage").innerText="Please enter a start and end date.";else document.getElementById("successMessage").innerText="Please enter the course title.";else document.getElementById("successMessage").innerText="Please enter the subject name.";else document.getElementById("successMessage").innerText="Please enter a valid course number.It should be a Integer Value."},className:Ft.a["course-form"]},r.a.createElement("h2",null,"Create Course"),r.a.createElement("label",null,r.a.createElement("span",null,"Course Number:"),r.a.createElement("input",{className:"new-course-input",type:"text",placeholder:"Course Number...",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Subject Name:"),r.a.createElement("input",{className:"new-course-input",type:"text",placeholder:"Subject...",value:l,onChange:function(e){return u(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Title:"),r.a.createElement("input",{className:"new-course-input",type:"text",placeholder:"Title...",value:h,onChange:function(e){return f(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("text",{id:"start-and-end"},"Duration: "),r.a.createElement(L.a,{selectsRange:!0,startDate:E,endDate:k,onChange:function(e){y(e)}})),r.a.createElement("button",null,"Create Course"),r.a.createElement("p",{id:"successMessage"}))):window.location.href="/"},Pt=a(144),Ut=a.n(Pt);var Jt=function(e){e=e.socket;var t=Object(n.useState)(""),a=Object(S.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),s=Object(S.a)(c,2),l=s[0],u=s[1],d=Object(n.useState)(""),m=Object(S.a)(d,2),h=m[0],f=m[1],g=Object(n.useState)(""),p=Object(S.a)(g,2),v=p[0],y=p[1];return 1===D.ReactSession.get("admin")?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null),r.a.createElement("label",null,r.a.createElement("br",null)),r.a.createElement("div",{align:"center"},r.a.createElement(xe.b,{to:"/"},r.a.createElement("img",{src:Nt.a,alt:"logo",height:"150",width:"170"}))),r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),document.getElementById("successMessage").style.color="Red",document.getElementById("successMessage").style.fontWeight="Bold",o)if(l)if(!h||isNaN(h)||h<=0)document.getElementById("successMessage").innerText="Please enter a valid quantity";else if(v){var a={model_num:o,model_name:l,quantity_total:h,model_location:v};e.emit("resourceAdded",a,null),e.on("resourceAdded",function(e){document.getElementById("successMessage").innerText="Resource successfully created.",document.getElementById("successMessage").style.color="Green",document.getElementById("successMessage").style.fontWeight="Bold"}),e.on("error",function(e){document.getElementById("successMessage").innerText="An error has occured! Please check your inputs.",document.getElementById("successMessage").style.color="Red",document.getElementById("successMessage").style.fontWeight="Bold"})}else document.getElementById("successMessage").innerText="Please enter a model location.";else document.getElementById("successMessage").innerText="Please enter a model name.";else document.getElementById("successMessage").innerText="Please enter a model number."},className:Ut.a["resource-form"]},r.a.createElement("h2",null,"Create Resource"),r.a.createElement("label",null,r.a.createElement("span",null,"Model Number:"),r.a.createElement("input",{className:"new-resource-input",type:"text",placeholder:"Model Number...",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Model Name:"),r.a.createElement("input",{className:"new-resource-input",type:"text",placeholder:"Model Name...",value:l,onChange:function(e){return u(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Quantity Total:"),r.a.createElement("input",{className:"new-resource-input",type:"text",placeholder:"Quantity Total...",value:h,onChange:function(e){return f(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Model Location:"),r.a.createElement("input",{className:"new-resource-input",type:"text",placeholder:"Model Location...",value:v,onChange:function(e){return y(e.target.value)}})),r.a.createElement("button",null,"Create Resource"),r.a.createElement("p",{id:"successMessage"}))):window.location.href="/"},qt=a(6),zt=a(170),Yt=a.n(zt),Gt=a(171),Ht=a.n(Gt),Kt=Object(v.a)({breakpoints:{values:{xxs:0,xs:460,lg:800}}}),Qt=Object(g.a)({check:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"green","&:hover":{background:"white",color:"green"},"&:focus":{background:"green",color:"green"}},cancel:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"red","&:hover":{background:"white",color:"red"},"&:focus":{background:"green",color:"red"}}}),Xt=Object(p.a)("div")({padding:"5px",width:"50%"}),Zt=Object(p.a)("div")({padding:"5px",width:"50%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}),$t=Object(p.a)("div")({border:"1px solid",borderColor:"steelblue",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"20px"}),ea=function(e){var t=e.vacation,a=e.name,n=e.onApprove,o=e.onReject,i=function(e){var t=new Date(e),a=function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December"}}(t.getMonth());return t.getDate()+" "+a+", "+t.getFullYear()};return r.a.createElement($t,{theme:Kt,sx:{width:{xxs:"100%",xs:"100%",lg:"500px"}}},r.a.createElement(Xt,{theme:Kt,sx:{width:{xxs:"70%",xs:"70%",lg:"50%"}}},r.a.createElement(y.a,{theme:Kt,sx:{fontSize:{xxs:"15px",xs:"15px",lg:"24px"}}},r.a.createElement("div",{className:"approval-entry-name",style:{fontWeight:"bold"}},a[0]," ",a[1]),r.a.createElement("div",{className:"approval-entry-start"},"From: ",i(t.start_date))," ",r.a.createElement("div",{className:"approval-entry-end"},"To: ",i(t.end_date))," ",r.a.createElement("div",{className:"approval-entry-duration"},"Duration: ",t.duration," days"))),r.a.createElement(Zt,null,r.a.createElement(f.a,{onClick:function(){return n(t)},className:Qt().check},r.a.createElement(Yt.a,null)),r.a.createElement(f.a,{onClick:function(){return o(t)},className:Qt().cancel},r.a.createElement(Ht.a,null))))},ta=function(e){var t=e.vacations,a=e.onApprove,n=e.onReject,o=function(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)},i=function(e){var t=e.username.split("_")[0],a=e.username.split("_")[1];return[t=o(t),a=o(a)]};return r.a.createElement("div",{className:"approval-list"},t.map(function(e){return r.a.createElement("div",{key:e.vacation_id},r.a.createElement(ea,{vacation:e,name:i(e),onApprove:a,onReject:n}))}))},aa=function(){return r.a.createElement("div",{className:"approval-no-vacations"},r.a.createElement("p",null,"All vacations have been processed."))},na=Object(g.a)({button:{border:0,borderRadius:5,color:"white",padding:"0 10px",background:"#003E6B",width:"8vw",alignSelf:"center","&:hover":{background:"#5082A7"},"&:focus":{background:"#003E6B","&:hover":{background:"#5082A7"}},textAlign:"right",marginLeft:"30%"},image:{width:80,height:80}}),ra=Object(v.a)({breakpoints:{values:{xxs:0,xs:460,lg:800}}});function oa(){var e=na();return r.a.createElement("img",{className:e.image,src:a(48),alt:"BCIT",style:{position:"absolute",left:5,top:5}})}function ia(){var e=na();return r.a.createElement(f.a,{className:e.button,onClick:function(e){window.location.href="/"}},"Back")}var ca=Object(p.a)("div")({width:"100vw",height:"10vh",display:"flex",flexDirection:"column",alignItems:"left",justifyContent:"space-evenly",color:"#003E6B",backgroundColor:"white"}),sa=Object(p.a)("div")({width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}),la=(Object(p.a)("div")({}),function(e){var t=e.title;return r.a.createElement(ca,null,r.a.createElement(oa,null),r.a.createElement(sa,null,r.a.createElement(y.a,{theme:ra,sx:{fontSize:{xxs:"11px",xs:"11px",lg:"16px"},marginLeft:{xxs:"60px",xs:"60px"}}},r.a.createElement("h1",null,t)),r.a.createElement(ia,null)))});la.defaultProps={title:"Pending Vacation Requests"};var ua=la,da="http://localhost:8000/",ma="vacationsNotApproved",ha=Object(v.a)({breakpoints:{values:{xxs:0,xs:460,lg:800}}}),fa=Object(p.a)("div")({width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"});var ga=function(e){function t(e){var a,n=e.socket;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).state={vacations:[],loaded:!1},a.approveVacation=function(e){a.setState({vacations:a.state.vacations.filter(function(t){return t.vacation_id!==e.vacation_id})}),a.socket.emit("vacationApproved",e)},a.rejectVacation=function(e){a.setState({vacations:a.state.vacations.filter(function(t){return t.vacation_id!==e.vacation_id})}),a.socket.emit("vacationDeleted",e)},a.parseData=function(e){if(!e)return null;var t=JSON.parse(e);a.setState({vacations:t}),a.setState({loaded:!0})},a.getVacations=function(){fetch(da+ma).then(function(e){return e.text()}).then(function(e){a.parseData(e)})},a.socket=n,n.on("vacationApproved",function(e){a.setState({vacations:a.state.vacations.filter(function(t){return t.vacation_id!==e.vacation_id})})}),n.on("vacationDeleted",function(e){a.setState({vacations:a.state.vacations.filter(function(t){return t.vacation_id!==e.vacation_id})})}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getVacations()}},{key:"renderApp",value:function(){return D.ReactSession.get("admin")?r.a.createElement(fa,{theme:ha},r.a.createElement(ua,null),this.state.vacations.length>0?r.a.createElement(ta,{vacations:this.state.vacations,onApprove:this.approveVacation,onReject:this.rejectVacation}):r.a.createElement(aa,null)):window.location.href="/"}},{key:"render",value:function(){return this.state.loaded?this.renderApp():r.a.createElement("span",null,"Loading data...")}}]),t}(r.a.Component),pa=a(173).a.connect("/");D.ReactSession.setStoreType("localStorage");var va=function(){return r.a.createElement(xe.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(qt.c,null,r.a.createElement(qt.a,{exact:!0,path:"/",element:r.a.createElement(ot,{socket:pa})}),r.a.createElement(qt.a,{exact:!0,path:"/detailed-schedule",element:r.a.createElement(bt,{socket:pa})}),r.a.createElement(qt.a,{exact:!0,path:"/resources",element:r.a.createElement(Ot,{socket:pa})}),r.a.createElement(qt.a,{exact:!0,path:"/vacation",element:r.a.createElement(re,{socket:pa})}),r.a.createElement(qt.a,{exact:!0,path:"/vacationApproval",element:r.a.createElement(ga,{socket:pa})}),r.a.createElement(qt.a,{exact:!0,path:"/login",element:r.a.createElement(Lt,null)}),r.a.createElement(qt.a,{exact:!0,path:"/create_user",element:r.a.createElement(Tt,{socket:pa})}),r.a.createElement(qt.a,{exact:!0,path:"/create_course",element:r.a.createElement(Vt,{socket:pa})}),r.a.createElement(qt.a,{exact:!0,path:"/create_resource",element:r.a.createElement(Jt,{socket:pa})}))))};i.a.render(r.a.createElement(va,null),document.getElementById("root"))},48:function(e,t,a){e.exports=a.p+"static/media/BCIT_logo.b8ed20e7.png"}},[[192,2,1]]]);
//# sourceMappingURL=main.63d55d9f.chunk.js.map
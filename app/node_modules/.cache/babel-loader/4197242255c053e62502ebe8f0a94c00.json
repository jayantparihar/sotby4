{"ast":null,"code":"import _toConsumableArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/azureuser/sotby2.0/app/src/components/TimelineGrid_Week.jsx\";\nimport React, { useEffect } from \"react\";\nimport _ from \"lodash\";\nimport { useState } from \"react\";\nimport RowHeaderWeek from './RowHeader_Week';\n// const [display, setDisplay] = useState('Week');\n\nexport default function TimelineGrid(_ref) {\n  var _this = this;\n  var socket = _ref.socket,\n    heightLimit = _ref.heightLimit,\n    instructorArray = _ref.instructorArray,\n    createCourse = _ref.createCourse,\n    onRemoveUser = _ref.onRemoveUser,\n    onAddUser = _ref.onAddUser,\n    currentDate = _ref.currentDate;\n  console.log('instructorArray', instructorArray);\n  var initialRowHeaderArray = instructorArray;\n  // 100px height cells + 4 px total margin, change later if needed\n  var rowHeight = 265;\n\n  // Height for the grid and for correct placment of the add row button\n  var _useState = useState(rowHeight),\n    _useState2 = _slicedToArray(_useState, 2),\n    height = _useState2[0],\n    setHeight = _useState2[1]; // List of users\n  var _useState3 = useState(initialRowHeaderArray),\n    _useState4 = _slicedToArray(_useState3, 2),\n    rowHeaderArray = _useState4[0],\n    setRowHeaderArray = _useState4[1]; // Add a user to the timeline\n  var addRowHeader = function addRowHeader(user) {\n    var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (emit) {\n      socket.emit('userAdded', user);\n    } else {\n      setRowHeaderArray(function (rowHeaderArray) {\n        return [].concat(_toConsumableArray(rowHeaderArray), [{\n          key: user.username,\n          name: user.firstname + \" \" + user.lastname,\n          timeblocks: [],\n          vacations: []\n        }]);\n      });\n\n      // Set the height limit to the number of users * 2 since each user takes up 2 rows\n      heightLimit.set((rowHeaderArray.length + 1) * 3);\n      setHeight(function (height) {\n        return height + rowHeight;\n      });\n\n      // Call the add user function passed in from the interactive grid so that it could also be updated\n      onAddUser(user);\n    }\n  };\n  var removeRowHeader = function removeRowHeader(key, x) {\n    var emit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    // Check that an element has been found and removed before adjusting the row heights\n    setRowHeaderArray(function (rowHeaderArray) {\n      return _.reject(rowHeaderArray, function (element) {\n        return element.key === key;\n      });\n    });\n    setHeight(function (height) {\n      return height - rowHeight;\n    });\n\n    // Height limit not used, elements are locked to their rows\n    heightLimit.set((rowHeaderArray.length - 1) * 3);\n\n    // Call the add user function passed in from the interactive grid so that it could also be updated\n    onRemoveUser(key, x - 1);\n    if (emit) socket.emit('userDeleted', key, x);\n  };\n  var createRowHeaderWeek = function createRowHeaderWeek(item, i) {\n    var x = i * 3 + 1;\n    return /*#__PURE__*/React.createElement(RowHeaderWeek, {\n      key: item.key + \"rowHeader\" + i,\n      socket: socket,\n      text: item.name,\n      currentDate: currentDate,\n      username: instructorArray[0].key,\n      position: {\n        x: x,\n        y: 1\n      },\n      width: 5,\n      height: 3,\n      removeFunction: function removeFunction() {\n        removeRowHeader(item.key, x);\n      },\n      createCourse: createCourse,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 16\n      }\n    });\n  };\n\n  //Use effect for attaching socket event listeners once the component mounts\n  useEffect(function () {\n    socket.on(\"userAdded\", function (user, state) {\n      console.log(\"Added: \" + JSON.stringify(user));\n      addRowHeader(user, false, state);\n    });\n    socket.on(\"userDeleted\", function (id, x) {\n      console.log(x);\n      console.log(id);\n      removeRowHeader(id, x, false);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    key: instructorArray[0].key,\n    className: \"grid-container-layout-weeks\",\n    style: {\n      height: height\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, rowHeaderArray.map(function (item, i) {\n    console.log('item, i', item, i);\n    return createRowHeaderWeek(item, i);\n  })));\n}","map":{"version":3,"names":["React","useEffect","_","useState","RowHeaderWeek","TimelineGrid","socket","heightLimit","instructorArray","createCourse","onRemoveUser","onAddUser","currentDate","console","log","initialRowHeaderArray","rowHeight","height","setHeight","rowHeaderArray","setRowHeaderArray","addRowHeader","user","emit","key","username","name","firstname","lastname","timeblocks","vacations","set","length","removeRowHeader","x","reject","element","createRowHeaderWeek","item","i","y","on","state","JSON","stringify","id","map"],"sources":["/home/azureuser/sotby2.0/app/src/components/TimelineGrid_Week.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport _ from \"lodash\";\nimport { useState } from \"react\";\nimport RowHeaderWeek from './RowHeader_Week'\n// const [display, setDisplay] = useState('Week');\n\nexport default function TimelineGrid({socket, heightLimit, instructorArray, createCourse, onRemoveUser, onAddUser, currentDate}) {\n    console.log('instructorArray',instructorArray)\n    const initialRowHeaderArray = instructorArray;\n    // 100px height cells + 4 px total margin, change later if needed\n    const rowHeight = 265; \n\n    // Height for the grid and for correct placment of the add row button\n    const [height, setHeight] = useState(rowHeight);\n\n    // List of users\n    const [rowHeaderArray, setRowHeaderArray] = useState(initialRowHeaderArray);\n\n    // Add a user to the timeline\n    const addRowHeader = (user, emit=true) => {\n        if(emit) {\n            socket.emit('userAdded', user);\n        } else {\n            setRowHeaderArray(rowHeaderArray => [...rowHeaderArray, {key: user.username, name: user.firstname + \" \" + user.lastname, timeblocks: [], vacations: []}]);\n\n            // Set the height limit to the number of users * 2 since each user takes up 2 rows\n            heightLimit.set((rowHeaderArray.length + 1) * 3);\n            setHeight((height) => {\n                return height + rowHeight\n            });\n    \n            // Call the add user function passed in from the interactive grid so that it could also be updated\n            onAddUser(user);\n        }\n    }\n\n    const removeRowHeader = (key, x, emit=true) => {\n        // Check that an element has been found and removed before adjusting the row heights\n        setRowHeaderArray(rowHeaderArray => _.reject(rowHeaderArray, (element) => {return element.key === key}));\n        setHeight(height => height - rowHeight);\n\n        // Height limit not used, elements are locked to their rows\n        heightLimit.set((rowHeaderArray.length - 1) * 3);\n\n        // Call the add user function passed in from the interactive grid so that it could also be updated\n        onRemoveUser(key, x - 1);\n\n        if(emit)\n            socket.emit('userDeleted', key, x); \n    }\n\n    const createRowHeaderWeek = (item, i) => {\n        const x = i * 3 + 1;\n        \n        return <RowHeaderWeek key={item.key + \"rowHeader\" + i} socket={socket} text={item.name} currentDate={currentDate} username={instructorArray[0].key}\n        position={{x: x, y: 1}} width={5} height={3} \n        removeFunction={() => {\n            removeRowHeader(item.key, x)}} \n            createCourse={createCourse}/>\n    }\n\n    //Use effect for attaching socket event listeners once the component mounts\n    useEffect(() => {\n        socket.on(\"userAdded\", (user, state) => {\n            console.log(\"Added: \" + JSON.stringify(user));\n            addRowHeader(user, false, state);\n        });\n\n        socket.on(\"userDeleted\", (id, x) => {\n            console.log(x);\n            console.log(id);\n            removeRowHeader(id, x, false);\n        });\n    }, []);\n\n    return(\n                <React.Fragment>\n                    <div key={instructorArray[0].key} className=\"grid-container-layout-weeks\" style={{height:height}}>\n                        {\n                            rowHeaderArray.map((item, i) => {\n                                console.log('item, i', item, i)\n                                return (\n                                    createRowHeaderWeek(item, i)\n                                )\n                            })\n                        }\n                    </div>\n                </React.Fragment>\n        )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
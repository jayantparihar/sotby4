{"ast":null,"code":"import _classCallCheck from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/azureuser/sotby2.0/app/src/vacation-approval/VacationApproval.js\";\nimport React from \"react\";\nimport NotApprovedList from \"./components/NotApprovedList\";\nimport NoVacations from \"./components/NoVacations\";\nimport { ReactSession } from 'react-client-session';\nimport { createTheme } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport Header from \"./components/Header\";\n\n// REPLACE WHEN HOSTING\nvar END_POINT_ROOT = \"/\";\nvar VACATION_RESOURCE = \"vacationsNotApproved\";\nvar screenLayout = createTheme({\n  breakpoints: {\n    values: {\n      xxs: 0,\n      xs: 460,\n      lg: 800\n    }\n  }\n});\nvar ApprovalContainer = styled('div')({\n  width: \"100%\",\n  height: \"100%\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\"\n});\nfunction isAdmin() {\n  if (ReactSession.get(\"admin\")) {\n    return true;\n  }\n  return false;\n}\nvar VacationApproval = /*#__PURE__*/function (_React$Component) {\n  _inherits(VacationApproval, _React$Component);\n  function VacationApproval(_ref) {\n    var _this;\n    var socket = _ref.socket;\n    _classCallCheck(this, VacationApproval);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VacationApproval).call(this));\n    _this.state = {\n      vacations: [],\n      loaded: false\n    };\n    _this.approveVacation = function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n      _this.socket.emit(\"vacationApproved\", vacation);\n    };\n    _this.rejectVacation = function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n      _this.socket.emit(\"vacationDeleted\", vacation);\n    };\n    _this.parseData = function (data) {\n      if (!data) {\n        return null;\n      }\n      var parsedData = JSON.parse(data);\n      _this.setState({\n        vacations: parsedData\n      });\n      _this.setState({\n        loaded: true\n      });\n    };\n    _this.getVacations = function () {\n      fetch(END_POINT_ROOT + VACATION_RESOURCE).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        _this.parseData(data);\n      });\n    };\n    _this.socket = socket;\n    socket.on(\"vacationApproved\", function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n    });\n    socket.on(\"vacationDeleted\", function (vacation) {\n      _this.setState({\n        vacations: _this.state.vacations.filter(function (v) {\n          return v.vacation_id !== vacation.vacation_id;\n        })\n      });\n    });\n    return _this;\n  }\n  _createClass(VacationApproval, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getVacations();\n    }\n  }, {\n    key: \"renderApp\",\n    value: function renderApp() {\n      return isAdmin() ? /*#__PURE__*/React.createElement(ApprovalContainer, {\n        theme: screenLayout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      }), this.state.vacations.length > 0 ? /*#__PURE__*/React.createElement(NotApprovedList, {\n        vacations: this.state.vacations,\n        onApprove: this.approveVacation,\n        onReject: this.rejectVacation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 22\n        }\n      }) : /*#__PURE__*/React.createElement(NoVacations, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 24\n        }\n      })) : window.location.href = \"/\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.state.loaded ? this.renderApp() : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, \"Loading data...\");\n    }\n  }]);\n  return VacationApproval;\n}(React.Component);\nexport { VacationApproval as default };","map":{"version":3,"names":["React","NotApprovedList","NoVacations","ReactSession","createTheme","styled","Header","END_POINT_ROOT","VACATION_RESOURCE","screenLayout","breakpoints","values","xxs","xs","lg","ApprovalContainer","width","height","display","flexDirection","alignItems","isAdmin","get","VacationApproval","socket","state","vacations","loaded","approveVacation","vacation","setState","filter","v","vacation_id","emit","rejectVacation","parseData","data","parsedData","JSON","parse","getVacations","fetch","then","response","text","on","length","window","location","href","renderApp","Component"],"sources":["/home/azureuser/sotby2.0/app/src/vacation-approval/VacationApproval.js"],"sourcesContent":["import React from \"react\";\nimport NotApprovedList from \"./components/NotApprovedList\"\nimport NoVacations from \"./components/NoVacations\"\nimport { ReactSession } from 'react-client-session';\nimport { createTheme } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport Header from \"./components/Header\";\n\n// REPLACE WHEN HOSTING\nconst END_POINT_ROOT = \"/\"\nconst VACATION_RESOURCE = \"vacationsNotApproved\"\n\nconst screenLayout = createTheme({\n    breakpoints: {\n        values: {\n            xxs: 0,\n            xs: 460,\n            lg: 800,\n        }\n    }\n})\n\nconst ApprovalContainer = styled('div')({\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n})\n\nfunction isAdmin() {\n    if (ReactSession.get(\"admin\")) {\n        return true;\n    }\n    return false;\n}\n\nexport default class VacationApproval extends React.Component {\n    state = {\n        vacations: [],\n        loaded: false,\n    }\n\n    constructor({ socket }) {\n        super()\n        this.socket = socket\n        socket.on(\"vacationApproved\", (vacation) => {\n            this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        })\n        socket.on(\"vacationDeleted\", (vacation) => {\n            this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        })\n    }\n\n    approveVacation = (vacation) => {\n        this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        this.socket.emit(\"vacationApproved\", vacation)\n    }\n\n    rejectVacation = (vacation) => {\n        this.setState({ vacations: this.state.vacations.filter((v) => v.vacation_id !== vacation.vacation_id) })\n        this.socket.emit(\"vacationDeleted\", vacation)\n    }\n\n    parseData = (data) => {\n        if (!data) {\n            return null;\n        }\n        const parsedData = JSON.parse(data)\n        this.setState({ vacations: parsedData })\n        this.setState({ loaded: true })\n    }\n\n    getVacations = () => {\n        fetch(END_POINT_ROOT + VACATION_RESOURCE)\n            .then(response => {\n                return response.text();\n            })\n            .then(data => {\n                this.parseData(data)\n            });\n    }\n\n    componentDidMount() {\n        this.getVacations();\n    }\n\n    renderApp() {\n        return isAdmin() ? (\n            <ApprovalContainer theme={screenLayout}>\n                <Header />\n                {this.state.vacations.length > 0 ?\n                    (<NotApprovedList vacations={this.state.vacations} onApprove={this.approveVacation} onReject={this.rejectVacation} />)\n                    : (<NoVacations />)}\n            </ApprovalContainer>\n        ) : window.location.href = \"/\"\n    }\n\n    render() {\n        return (this.state.loaded ? this.renderApp() :\n            <span>Loading data...</span>\n        );\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
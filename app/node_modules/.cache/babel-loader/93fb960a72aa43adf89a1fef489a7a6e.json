{"ast":null,"code":"import _slicedToArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/azureuser/sotby2.0/app/src/resources/resources.js\",\n  _this7 = this;\nimport React, { Component } from 'react';\nimport 'react-edit-text/dist/index.css';\nimport './index.css';\nimport _ from \"lodash\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { ReactSession } from 'react-client-session';\nimport AdminNav from \"../components/AdminNav\";\nimport UserNav from \"../components/UserNav\";\nimport DefaultNav from \"../components/DefaultNav\";\nimport '../navbar.css';\nfunction SelectNav(props) {\n  var userStatus = props.userStatus;\n  if (userStatus === 1) {\n    return /*#__PURE__*/React.createElement(AdminNav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 16\n      }\n    });\n  }\n  if (userStatus === 0) {\n    return /*#__PURE__*/React.createElement(UserNav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 16\n      }\n    });\n  }\n  return /*#__PURE__*/React.createElement(DefaultNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 12\n    }\n  });\n}\nvar END_POINT_ROOT = \"/\";\nvar PopUp = /*#__PURE__*/function (_Component) {\n  _inherits(PopUp, _Component);\n  function PopUp(_ref) {\n    var _this;\n    var props = _ref.props,\n      socket = _ref.socket,\n      toggle = _ref.toggle,\n      resInfo = _ref.resInfo,\n      ds_id = _ref.ds_id,\n      username = _ref.username,\n      date = _ref.date;\n    _classCallCheck(this, PopUp);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PopUp).call(this, props));\n    _this.handleClose = function () {\n      _this.toggle();\n    };\n    _this.handleSubmit = function () {\n      // console.log(this.quantityAvailable);\n      _this.props.toggle();\n      if (isNaN(_this.state.inputValue)) {\n        alert(\"Please enter a number\");\n      } else if (_this.state.inputValue > _this.quantityAvailable) {\n        alert(\"Not enough items are available!\");\n      } else if (_this.state.inputValue <= 0) {\n        alert(\"Invalid number\");\n      } else {\n        alert(\"Succesfully booked \".concat(_this.state.inputValue, \" \").concat(_this.resInfo.model_name));\n        console.log('this.stae.inputvalue', _this.state.inputValue);\n        console.log('this.resinfo.modlelnu', _this.resInfo.model_num);\n        _this.socket.emit(\"bookResource\", {\n          // ds_id: this.ds_id,\n          model_num: _this.resInfo.model_num,\n          model_name: _this.resInfo.model_name,\n          quantity_booked: _this.state.inputValue,\n          date: _this.props.date,\n          username: _this.props.username\n        });\n      }\n    };\n    _this.updateInputValue = function (evt) {\n      console.log('quantitiy booked', evt.target.value);\n      _this.setState({\n        inputValue: evt.target.value\n      });\n    };\n    _this.state = {\n      inputValue: 0\n    };\n    _this.resInfo = resInfo;\n    _this.toggle = toggle;\n    _this.socket = socket;\n    _this.quantityAvailable = resInfo.q_left;\n    _this.ds_id = ds_id;\n    console.log('resinfo popup', resInfo);\n    console.log('date and username popup', username, date);\n    return _this;\n  }\n  _createClass(PopUp, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal_content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"close\",\n        onClick: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }\n      }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        id: \"popUpLabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }\n      }, \"Number of Items:\", /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        name: \"count\",\n        value: this.state.inputValue,\n        onChange: function onChange(evt) {\n          return _this2.updateInputValue(evt);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }\n      }))));\n    }\n  }]);\n  return PopUp;\n}(Component);\nvar Item = /*#__PURE__*/function (_React$Component) {\n  _inherits(Item, _React$Component);\n  function Item(_ref2) {\n    var _this3;\n    var props = _ref2.props,\n      socket = _ref2.socket,\n      resInfo = _ref2.resInfo,\n      ds_id = _ref2.ds_id,\n      username = _ref2.username,\n      date = _ref2.date;\n    _classCallCheck(this, Item);\n    // console.log(resInfo)\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(Item).call(this, props));\n    _this3.togglePop = function () {\n      _this3.setState({\n        seen: !_this3.state.seen\n      });\n    };\n    _this3.resInfo = resInfo;\n    _this3.state = {\n      seen: false\n    };\n    _this3.socket = socket;\n    _this3.ds_id = ds_id;\n    //   Has a value  ?  yes, then keep it  :  No, then set it to quantity_total\n    _this3.resInfo.q_left = _this3.resInfo.q_left !== null ? _this3.resInfo.q_left : _this3.resInfo.quantity_total;\n    return _this3;\n  }\n  _createClass(Item, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, this.resInfo.model_name)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }\n      }, this.resInfo.quantity_total)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }\n      }, this.resInfo.q_left)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }\n      }, this.resInfo.model_location)), /*#__PURE__*/React.createElement(\"td\", {\n        id: \"popUpBookBtn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }\n      }, this.state.seen ? null : /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this4.togglePop();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 47\n        }\n      }, \"Book\"), this.state.seen ? /*#__PURE__*/React.createElement(PopUp, {\n        toggle: this.togglePop,\n        resInfo: this.resInfo,\n        socket: this.socket,\n        ds_id: this.ds_id,\n        username: this.props.username,\n        date: this.props.date,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 40\n        }\n      }) : null));\n    }\n  }]);\n  return Item;\n}(React.Component);\nvar Resource = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Resource, _React$Component2);\n  function Resource(_ref3) {\n    var _this5;\n    var props = _ref3.props,\n      socket = _ref3.socket,\n      _date = _ref3.date,\n      username = _ref3.username;\n    _classCallCheck(this, Resource);\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(Resource).call(this, props));\n    _this5.parseData = function (data) {\n      if (!data) {\n        return null;\n      }\n      var parsedData = JSON.parse(data);\n      _this5.setState({\n        data: parsedData.rows\n      });\n      _this5.setState({\n        dataLoaded: true\n      });\n    };\n    _this5.retrieveResourcesDataFromDatabase = function (date) {\n      fetch(END_POINT_ROOT + \"resources?date=\".concat(date), {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        _this5.parseData(data);\n      });\n    };\n    _this5.socket = socket;\n    _this5.state = {\n      data: null,\n      dataLoaded: false\n    };\n    _this5.date = _date;\n    _this5.socket.on('bookResource', function (resInfo) {\n      var index;\n      for (var i = 0; i < _this5.state.data.length; i++) {\n        if (_this5.state.data[i].model_num === resInfo.model_num) {\n          index = i;\n          break;\n        }\n      }\n      var copyData = _this5.state.data.slice();\n      copyData[index] = resInfo;\n      _this5.setState({\n        data: _.reduce(copyData, function (acc, res) {\n          var rowData = res;\n          return [].concat(_toConsumableArray(acc), [rowData]);\n        }, [])\n      });\n    });\n    return _this5;\n  }\n  _createClass(Resource, [{\n    key: \"renderItem\",\n    value: function renderItem(itemInfo) {\n      return /*#__PURE__*/React.createElement(Item, {\n        resInfo: itemInfo,\n        key: itemInfo.model_num + itemInfo.q_left,\n        socket: this.socket,\n        ds_id: this.ds_id,\n        username: this.props.username,\n        date: this.props.date,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }\n      });\n    }\n  }, {\n    key: \"renderResouce\",\n    value: function renderResouce() {\n      var _this6 = this;\n      // console.log('this.state.data',this.state.data)\n      var items = this.state.data.map(function (itemInfo, index) {\n        return _this6.renderItem(itemInfo);\n      });\n      return /*#__PURE__*/React.createElement(\"table\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"caption\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }\n      }, \"Available Resources\"), /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 25\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 25\n        }\n      }, \"Total Quantity\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }\n      }, \"Available Quantity\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 25\n        }\n      }, \"location\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      }, items));\n    } //----\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.retrieveResourcesDataFromDatabase(this.date);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return ReactSession.get(\"admin\") >= 0 ? this.state.dataLoaded ? this.renderResouce() : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, \"Loading data...\") : window.location.href = \"/\";\n    }\n  }]);\n  return Resource;\n}(React.Component);\nfunction nFormat(n) {\n  if (n <= 9) {\n    return \"0\" + n;\n  } else {\n    return n;\n  }\n}\nvar getFormatedDate = function getFormatedDate(dt) {\n  return dt.getFullYear() + \"-\" + nFormat(dt.getMonth() + 1) + \"-\" + nFormat(dt.getDate() + 1);\n};\nvar Resources = function Resources(socket) {\n  var _useSearchParams = useSearchParams(),\n    _useSearchParams2 = _slicedToArray(_useSearchParams, 2),\n    searchParams = _useSearchParams2[0],\n    setSearchParams = _useSearchParams2[1];\n  var current_date = new Date(searchParams.get(\"date\"));\n  var username = searchParams.get(\"username\");\n  // const formattedDate = `${current_date.getFullYear()}-${current_date.getMonth() + 1}-${current_date.getDate()}`;\n  var formattedDate = getFormatedDate(current_date);\n  // console.log('date and username', formattedDate, username);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this7,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SelectNav, {\n    userStatus: ReactSession.get(\"admin\"),\n    __self: _this7,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Resource, {\n    socket: socket.socket,\n    username: username,\n    date: formattedDate,\n    __self: _this7,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }\n  }));\n};\nexport default Resources;","map":{"version":3,"names":["React","Component","_","useSearchParams","ReactSession","AdminNav","UserNav","DefaultNav","SelectNav","props","userStatus","END_POINT_ROOT","PopUp","socket","toggle","resInfo","ds_id","username","date","handleClose","handleSubmit","isNaN","state","inputValue","alert","quantityAvailable","model_name","console","log","model_num","emit","quantity_booked","updateInputValue","evt","target","value","setState","q_left","Item","togglePop","seen","quantity_total","model_location","Resource","parseData","data","parsedData","JSON","parse","rows","dataLoaded","retrieveResourcesDataFromDatabase","fetch","method","headers","then","response","text","on","index","i","length","copyData","slice","reduce","acc","res","rowData","itemInfo","items","map","renderItem","get","renderResouce","window","location","href","nFormat","n","getFormatedDate","dt","getFullYear","getMonth","getDate","Resources","searchParams","setSearchParams","current_date","Date","formattedDate"],"sources":["/home/azureuser/sotby2.0/app/src/resources/resources.js"],"sourcesContent":["import React, { Component } from 'react';\nimport 'react-edit-text/dist/index.css';\nimport './index.css';\nimport _ from \"lodash\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { ReactSession } from 'react-client-session';\nimport AdminNav from \"../components/AdminNav\";\nimport UserNav from \"../components/UserNav\";\nimport DefaultNav from \"../components/DefaultNav\";\nimport '../navbar.css';\n\nfunction SelectNav(props) {\n    const userStatus = props.userStatus;\n    if (userStatus === 1) {\n        return <AdminNav />\n    }\n    if (userStatus === 0) {\n        return <UserNav />\n    }\n    return <DefaultNav />\n}\n\nconst END_POINT_ROOT = \"/\";\n\nclass PopUp extends Component {\n\n    constructor({ props, socket, toggle, resInfo, ds_id, username, date }) {\n        super(props);\n        this.state = {\n            inputValue: 0,\n        };\n        this.resInfo = resInfo;\n        this.toggle = toggle;\n        this.socket = socket;\n        this.quantityAvailable = resInfo.q_left;\n        this.ds_id = ds_id;\n        console.log('resinfo popup', resInfo)\n        console.log('date and username popup', username,date)\n        \n\n    }\n\n    handleClose = () => {\n        this.toggle();\n    }\n\n    handleSubmit = () => {\n        // console.log(this.quantityAvailable);\n        this.props.toggle();\n\n        if (isNaN(this.state.inputValue)) {\n            alert(\"Please enter a number\");\n        }\n        else if (this.state.inputValue > this.quantityAvailable) {\n            alert(\"Not enough items are available!\");\n        }\n        else if (this.state.inputValue <= 0) {\n            alert(\"Invalid number\");\n        }\n        else {\n            alert(`Succesfully booked ${this.state.inputValue} ${this.resInfo.model_name}`);\n            console.log('this.stae.inputvalue', this.state.inputValue)\n            console.log('this.resinfo.modlelnu', this.resInfo.model_num)\n            this.socket.emit(\"bookResource\", {\n                // ds_id: this.ds_id,\n                model_num: this.resInfo.model_num,\n                model_name: this.resInfo.model_name,\n                quantity_booked: this.state.inputValue,\n                date: this.props.date,\n                username: this.props.username\n            });\n        }\n    };\n\n    updateInputValue = (evt) => {\n        console.log('quantitiy booked', evt.target.value    )\n        this.setState({\n            inputValue: evt.target.value\n        });\n    }\n\n    render() {\n        return (\n\t\t\n            <div className=\"modal\">\n                <div className=\"modal_content\">\n                    <span className=\"close\" onClick={this.handleClose}>\n                        &times;\n                    </span>\n                    <form>\n                        <label id=\"popUpLabel\">\n                            Number of Items:\n                            <input type=\"text\" name=\"count\" value={this.state.inputValue} onChange={evt => this.updateInputValue(evt)} />\n                        </label>\n                        <br />\n                        <input type=\"submit\" onClick={this.handleSubmit} />\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Item extends React.Component {\n\n    constructor({ props, socket, resInfo, ds_id, username, date }) {\n        // console.log(resInfo)\n        super(props);\n        this.resInfo = resInfo;\n        this.state = {\n            seen: false\n        }\n        this.socket = socket;\n        this.ds_id = ds_id;\n        //   Has a value  ?  yes, then keep it  :  No, then set it to quantity_total\n        this.resInfo.q_left = this.resInfo.q_left !== null ? this.resInfo.q_left : this.resInfo.quantity_total\n    }\n\n    togglePop = () => {\n        this.setState({\n            seen: !this.state.seen\n        });\n    };\n\n    render() {\n        return (\n            <tr>\n                <td>\n                    <p>{this.resInfo.model_name}</p>\n                </td>\n                <td>\n                    <p>{this.resInfo.quantity_total}</p>\n                </td>\n                <td>\n                    <p>{this.resInfo.q_left}</p>\n                </td>\n                <td>\n                    <p>{this.resInfo.model_location}</p>\n                </td>\n                <td id=\"popUpBookBtn\">\n                    {this.state.seen ? null : <button onClick={() => this.togglePop()}>Book</button>}\n                    {this.state.seen ? <PopUp toggle={this.togglePop} resInfo={this.resInfo} socket={this.socket} ds_id={this.ds_id} username={this.props.username} date={this.props.date}/> : null}\n                </td>\n            </tr>\n        );\n    }\n}\n\nclass Resource extends React.Component {\n\n    constructor({ props, socket, date, username}) {\n        super(props);\n        this.socket = socket;\n        this.state = {\n            data: null,\n            dataLoaded: false,\n        }\n\n        this.date = date;\n        this.socket.on('bookResource', (resInfo) => {\n\n            let index;\n            for (let i = 0; i < this.state.data.length; i++) {\n                if (this.state.data[i].model_num ===resInfo.model_num) {\n                    index = i;\n                    break;\n                }\n            }\n\n            let copyData = this.state.data.slice();\n            copyData[index] = resInfo;\n\n            this.setState({\n                data: _.reduce(copyData, (acc, res) => {\n                    const rowData = res;\n                    return [...acc, rowData];\n                }, [])\n            });\n        })\n    }\n\n    renderItem(itemInfo) {\n        return (\n            <Item resInfo={itemInfo} key={itemInfo.model_num + itemInfo.q_left} socket={this.socket} ds_id={this.ds_id} username={this.props.username} date={this.props.date}/>\n        );\n    }\n\n    renderResouce() {\n        // console.log('this.state.data',this.state.data)\n        const items = this.state.data.map((itemInfo, index) => {\n            return (\n                this.renderItem(itemInfo)\n            );\n        });\n        return (\n            <table>\n                <caption>Available Resources</caption>\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Total Quantity</th>\n                        <th>Available Quantity</th>\n                        <th>location</th>\n                        <th></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {items}\n                </tbody>\n            </table>\n        );\n    }\n\n    //----\n    parseData = (data) => {\n        if (!data) {\n            return null;\n        }\n\n        const parsedData = JSON.parse(data);\n        this.setState({ data: parsedData.rows });\n        this.setState({ dataLoaded: true });\n    }\n\n    retrieveResourcesDataFromDatabase = (date) => {\n        fetch(END_POINT_ROOT + `resources?date=${date}`, {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json' },\n        })\n            .then(response => {\n                return response.text();\n            })\n            .then(data => {\n                this.parseData(data)\n            });\n    }\n\n    componentDidMount() {\n        this.retrieveResourcesDataFromDatabase(this.date);\n    }\n\n    render() {\n        return (\n            ReactSession.get(\"admin\") >= 0 ? (\n                this.state.dataLoaded ? this.renderResouce() :\n                    <span>Loading data...</span>\n            ) :\n                window.location.href = \"/\"\n        );\n    }\n}\n\nfunction nFormat(n){ if(n <= 9){ return \"0\" + n } else { return n } }\n    \nconst getFormatedDate = (dt) => {\n    return dt.getFullYear() + \"-\" + nFormat((dt.getMonth()+1)) + \"-\" + nFormat(dt.getDate()+1)\n}\n\n\nconst Resources = (socket) => {\n    const [searchParams, setSearchParams] = useSearchParams();\n    const current_date = new Date(searchParams.get(\"date\"));\n    const username = searchParams.get(\"username\");\n    // const formattedDate = `${current_date.getFullYear()}-${current_date.getMonth() + 1}-${current_date.getDate()}`;\n    const formattedDate = getFormatedDate(current_date)\n    // console.log('date and username', formattedDate, username);\n    return (\n        <React.Fragment>\n            <SelectNav userStatus={ReactSession.get(\"admin\")} />\n            <Resource socket={socket.socket} username={username} date={formattedDate}></Resource>\n        </React.Fragment>  \n    );\n}\n\nexport default Resources;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
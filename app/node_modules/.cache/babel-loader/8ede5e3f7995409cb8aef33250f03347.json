{"ast":null,"code":"import _toConsumableArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/azureuser/sotby2.0/app/src/components/TimelineGrid.jsx\";\nimport React, { useEffect } from \"react\";\nimport _ from \"lodash\";\nimport RowHeader from './RowHeader';\nimport { useState } from \"react\";\n// const [display, setDisplay] = useState('Week');\n\nexport default function TimelineGrid(_ref) {\n  var _this = this;\n  var socket = _ref.socket,\n    heightLimit = _ref.heightLimit,\n    instructorArray = _ref.instructorArray,\n    createCourse = _ref.createCourse,\n    totalWeeks = _ref.totalWeeks,\n    onRemoveUser = _ref.onRemoveUser,\n    onAddUser = _ref.onAddUser,\n    viewType = _ref.viewType,\n    weekNumArray = _ref.weekNumArray;\n  var grid_class_name = \"grid-container-layout-\" + viewType;\n  var initialRowHeaderArray = instructorArray;\n\n  // 100px height cells + 4 px total margin, change later if needed\n  var rowHeight = 204;\n\n  // Height for the grid and for correct placment of the add row button\n  var _useState = useState(initialRowHeaderArray.length * rowHeight),\n    _useState2 = _slicedToArray(_useState, 2),\n    height = _useState2[0],\n    setHeight = _useState2[1]; // List of users\n  var _useState3 = useState(initialRowHeaderArray),\n    _useState4 = _slicedToArray(_useState3, 2),\n    rowHeaderArray = _useState4[0],\n    setRowHeaderArray = _useState4[1]; // Add a user to the timeline\n  var addRowHeader = function addRowHeader(user) {\n    var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (emit) {\n      socket.emit('userAdded', user);\n    } else {\n      setRowHeaderArray(function (rowHeaderArray) {\n        return [].concat(_toConsumableArray(rowHeaderArray), [{\n          key: user.username,\n          name: user.firstname + \" \" + user.lastname,\n          timeblocks: [],\n          vacations: []\n        }]);\n      });\n\n      // Set the height limit to the number of users * 2 since each user takes up 2 rows\n      heightLimit.set((rowHeaderArray.length + 1) * 2);\n      setHeight(function (height) {\n        return height + rowHeight;\n      });\n\n      // Call the add user function passed in from the interactive grid so that it could also be updated\n      onAddUser(user);\n    }\n  };\n  var removeRowHeader = function removeRowHeader(key, x) {\n    var emit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    // Check that an element has been found and removed before adjusting the row heights\n    setRowHeaderArray(function (rowHeaderArray) {\n      return _.reject(rowHeaderArray, function (element) {\n        return element.key === key;\n      });\n    });\n    setHeight(function (height) {\n      return height - rowHeight;\n    });\n\n    // Height limit not used, elements are locked to their rows\n    heightLimit.set((rowHeaderArray.length - 1) * 2);\n\n    // Call the add user function passed in from the interactive grid so that it could also be updated\n    onRemoveUser(key, x - 1);\n    if (emit) socket.emit('userDeleted', key, x);\n  };\n  var createRowHeader = function createRowHeader(item, i) {\n    var x = i * 2 + 1;\n    return /*#__PURE__*/React.createElement(RowHeader, {\n      key: item.key + \"rowHeader\" + i,\n      socket: socket,\n      text: item.name,\n      position: {\n        x: x,\n        y: 1\n      },\n      width: totalWeeks,\n      height: 2,\n      viewType: viewType,\n      removeFunction: function removeFunction() {\n        removeRowHeader(item.key, x);\n      },\n      createCourse: createCourse,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 16\n      }\n    });\n  };\n\n  //Use effect for attaching socket event listeners once the component mounts\n  useEffect(function () {\n    socket.on(\"userAdded\", function (user, state) {\n      console.log(\"Added: \" + JSON.stringify(user));\n      addRowHeader(user, false, state);\n    });\n    socket.on(\"userDeleted\", function (id, x) {\n      console.log(x);\n      console.log(id);\n      removeRowHeader(id, x, false);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: grid_class_name,\n    style: {\n      height: height\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, rowHeaderArray.map(function (item, i) {\n    return createRowHeader(item, i);\n  })));\n}","map":{"version":3,"names":["React","useEffect","_","RowHeader","useState","TimelineGrid","socket","heightLimit","instructorArray","createCourse","totalWeeks","onRemoveUser","onAddUser","viewType","weekNumArray","grid_class_name","initialRowHeaderArray","rowHeight","length","height","setHeight","rowHeaderArray","setRowHeaderArray","addRowHeader","user","emit","key","username","name","firstname","lastname","timeblocks","vacations","set","removeRowHeader","x","reject","element","createRowHeader","item","i","y","on","state","console","log","JSON","stringify","id","map"],"sources":["/home/azureuser/sotby2.0/app/src/components/TimelineGrid.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport _ from \"lodash\";\nimport RowHeader from './RowHeader';\nimport { useState } from \"react\";\n// const [display, setDisplay] = useState('Week');\n\nexport default function TimelineGrid({socket, heightLimit, instructorArray, createCourse, totalWeeks, onRemoveUser, onAddUser, viewType, weekNumArray}) {\n    const grid_class_name = \"grid-container-layout-\" + viewType\n    \n    const initialRowHeaderArray = instructorArray;\n\n    // 100px height cells + 4 px total margin, change later if needed\n    const rowHeight = 204; \n\n    // Height for the grid and for correct placment of the add row button\n    const [height, setHeight] = useState(initialRowHeaderArray.length * rowHeight);\n\n    // List of users\n    const [rowHeaderArray, setRowHeaderArray] = useState(initialRowHeaderArray);\n\n    // Add a user to the timeline\n    const addRowHeader = (user, emit=true) => {\n        if(emit) {\n            socket.emit('userAdded', user);\n        } else {\n            setRowHeaderArray(rowHeaderArray => [...rowHeaderArray, {key: user.username, name: user.firstname + \" \" + user.lastname, timeblocks: [], vacations: []}]);\n\n            // Set the height limit to the number of users * 2 since each user takes up 2 rows\n            heightLimit.set((rowHeaderArray.length + 1) * 2);\n            setHeight(height => height + rowHeight);\n    \n            // Call the add user function passed in from the interactive grid so that it could also be updated\n            onAddUser(user);\n        }\n    }\n\n    const removeRowHeader = (key, x, emit=true) => {\n        // Check that an element has been found and removed before adjusting the row heights\n        setRowHeaderArray(rowHeaderArray => _.reject(rowHeaderArray, (element) => {return element.key === key}));\n        setHeight(height => height - rowHeight);\n\n        // Height limit not used, elements are locked to their rows\n        heightLimit.set((rowHeaderArray.length - 1) * 2);\n\n        // Call the add user function passed in from the interactive grid so that it could also be updated\n        onRemoveUser(key, x - 1);\n\n        if(emit)\n            socket.emit('userDeleted', key, x); \n    }\n    \n    const createRowHeader = (item, i) => {\n        const x = i * 2 + 1;\n        return <RowHeader key={item.key + \"rowHeader\" + i} socket={socket} text={item.name} \n                position={{x: x, y: 1}} width={totalWeeks} height={2} viewType={viewType}\n                removeFunction={() => {\n                    removeRowHeader(item.key, x)}} \n                    createCourse={createCourse}/>\n    }\n\n    //Use effect for attaching socket event listeners once the component mounts\n    useEffect(() => {\n        socket.on(\"userAdded\", (user, state) => {\n            console.log(\"Added: \" + JSON.stringify(user));\n            addRowHeader(user, false, state);\n        });\n\n        socket.on(\"userDeleted\", (id, x) => {\n            console.log(x);\n            console.log(id);\n            removeRowHeader(id, x, false);\n        });\n    }, []);\n\n    return(\n                <React.Fragment>\n                    <div className={grid_class_name} style={{height:height}}>\n                        {\n                            rowHeaderArray.map((item, i) => {\n                                return (\n                                    createRowHeader(item, i)\n                                )\n                            })\n                        }\n                    </div>\n                </React.Fragment>\n        )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/azureuser/sotby2.0/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/azureuser/sotby2.0/app/src/components/NoCollisionLayout.jsx\";\nimport React from \"react\";\nimport _ from \"lodash\";\nimport TimelineGrid from \"./TimelineGrid\";\nimport { Link } from 'react-router-dom';\nimport { ReactSession } from 'react-client-session';\nimport RGL, { WidthProvider } from \"react-grid-layout\";\nimport { FormControlUnstyledContext } from \"@mui/base\";\nvar LocalStorageLayout = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(LocalStorageLayout, _React$PureComponent);\n  function LocalStorageLayout(_ref) {\n    var _this;\n    var props = _ref.props,\n      socket = _ref.socket,\n      heightLimit = _ref.heightLimit,\n      newInstructorArray = _ref.newInstructorArray,\n      weekInformation = _ref.weekInformation,\n      totalWeeks = _ref.totalWeeks,\n      firstWeek = _ref.firstWeek,\n      currentMonthWeeks = _ref.currentMonthWeeks,\n      currentMonth = _ref.currentMonth,\n      year = _ref.year,\n      firstDate = _ref.firstDate,\n      currentDate = _ref.currentDate;\n    _classCallCheck(this, LocalStorageLayout);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LocalStorageLayout).call(this, props));\n    _this.replaceItem = function (item) {\n      for (var i = 0; i < _this.state.layout.length; i++) {\n        if (_this.state.layout[i].i === item.i) {\n          var newLayout = _this.state.layout.slice();\n          newLayout[i] = item;\n          _this.setState({\n            layout: newLayout\n          });\n          break;\n        }\n      }\n    };\n    _this.onLayoutChange = function (layout) {\n      _this.setState({\n        layout: layout\n      });\n    };\n    _this.onItemChange = function (layout, oldItem, newItem) {\n      // Update the dates on the postgresql database\n      var startDate = findWeekDate(_this.state.weekInformation, newItem.x);\n      var endDate = findWeekDate(_this.state.weekInformation, newItem.w + newItem.x - 1);\n\n      // HTTP request instead of sockets\n      var index = _.findIndex(_this.monthItems, function (element) {\n        return element.data.i.toString() === newItem.i;\n      });\n      var foundItem = _this.monthItems[index];\n\n      // Restrict movement of the course to one row only\n      var yAxisLockedItem = newItem;\n      yAxisLockedItem.y = oldItem.y;\n      _this.replaceItem(yAxisLockedItem);\n      var instructor = _this.state.instructorArray[Math.floor(newItem.y / 2)];\n      _this.socket.emit('itemChanged', yAxisLockedItem, {\n        username: instructor.key,\n        courseNum: foundItem.courseNum,\n        caId: foundItem.caId,\n        start: startDate.getTime(),\n        end: endDate.getTime()\n      });\n    };\n    _this.onAddVacation = function (info) {\n      var start = findWeekIndex(_this.state.weekInformation, new Date(info.start_date));\n      var end = findWeekIndex(_this.state.weekInformation, new Date(info.end_date)) + 1;\n      var index = _.findIndex(_this.state.instructorArray, function (element) {\n        return element.key === info.username;\n      });\n      var newVacation = {\n        text: info.username + \"'s Vacation\",\n        uid: info.username,\n        vid: info.vacation_id,\n        data: {\n          i: info.username + info.vacation_id,\n          x: start,\n          y: index * 2 + 1,\n          w: end - start,\n          h: 1\n        }\n      };\n      _this.setState({\n        items: _this.state.items.concat(newVacation)\n      });\n    };\n    _this.onAddCourse = function (course) {\n      var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var emit = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var w = parseInt(course.weeklength);\n      var startDate = findWeekDate(_this.state.weekInformation, x + _this.props.firstWeek);\n      var endDate = findWeekDate(_this.state.weekInformation, w + x + _this.props.firstWeek);\n      var instructor = _this.state.instructorArray[Math.floor(y / 2)];\n      var start = findWeekIndex(_this.state.weekInformation, startDate);\n      var end = findWeekIndex(_this.state.weekInformation, endDate);\n\n      // User/ instructor was deleted, can't create a course\n      if (instructor === undefined) {\n        return;\n      }\n      if (emit) {\n        _this.socket.emit('courseAdded', _objectSpread({}, course, {\n          x: x,\n          y: y,\n          instructorKey: instructor.key,\n          courseNum: course.number,\n          start: startDate.getTime(),\n          end: endDate.getTime()\n        }));\n      } else {\n        _this.setState({\n          // Add a new item\n          items: _this.state.items.concat({\n            start: start,\n            end: end,\n            text: course.title,\n            userId: instructor.key,\n            courseNum: course.number,\n            caId: course.caId,\n            data: {\n              i: course.caId,\n              x: x,\n              y: y,\n              w: w,\n              h: 1\n            }\n          })\n        });\n      }\n    };\n    _this.onRemoveUser = function (key, y) {\n      var initialLength = _this.state.instructorArray.length;\n      _this.setState({\n        instructorArray: _.reject(_this.state.instructorArray, function (element) {\n          return element.key === key;\n        })\n      }, function () {\n        // No user/ instructor found to delete\n        if (_this.state.instructorArray.length !== initialLength) {\n          // Remove elements on the same row\n          console.log(\"Removed items at: \" + y);\n          _this.setState({\n            items: _.reject(_this.state.items, function (element) {\n              return element.data.y === y || element.data.y === y + 1;\n            })\n          }, function () {\n            // Move course elements up if they are below the user that was deleted\n            _this.setState({\n              items: _.reduce(_this.state.items, function (acc, element) {\n                if (element.data.y > y) {\n                  var newElement = element;\n                  newElement.data.y -= 2;\n                  return [].concat(_toConsumableArray(acc), [newElement]);\n                } else {\n                  return [].concat(_toConsumableArray(acc), [element]);\n                }\n              }, [])\n            }, function () {\n              _this.setState({\n                layout: _.reduce(_this.state.items, function (acc, element) {\n                  if (element.vid !== undefined) {\n                    var itemData = _objectSpread({}, element.data, {\n                      isDraggable: false,\n                      isResizable: false\n                    });\n                    return [].concat(_toConsumableArray(acc), [itemData]);\n                  } else {\n                    var _itemData = element.data;\n                    return [].concat(_toConsumableArray(acc), [_itemData]);\n                  }\n                }, [])\n              });\n            });\n          });\n          // Reset layout so that the items are shifted up visually\n        }\n      });\n    };\n    _this.onAddUser = function (user) {\n      _this.setState({\n        instructorArray: [].concat(_toConsumableArray(_this.state.instructorArray), [{\n          key: user.username,\n          name: user.firstname + \" \" + user.lastname,\n          timeblocks: [],\n          vacations: []\n        }])\n      });\n    };\n    _this.resize = function () {\n      return _this.forceUpdate();\n    };\n    var timeLineInformation = weekInformation.weekRangesArray[currentMonth];\n    _this.state = {\n      // Loop through the instructor array to get all the courses associated with them\n      items: newInstructorArray.reduce(function (acc, element, index) {\n        if (element.timeblocks.length === 0 && element.vacations.length === 0 || weekInformation.length === 0) {\n          return acc;\n        }\n\n        // Create a course element for every timeblock and concatenate them into one array\n        var arr = acc.concat(element.timeblocks.map(function (info) {\n          var start = Math.floor(getDayRange(firstDate, info.start) / 7);\n          var end = Math.floor((getDayRange(firstDate, info.end) + 1) / 7);\n          var width = getCourseWidth(info.start, currentDate);\n\n          // For finding the width of course in a week view\n          var weekMonday = getWeekMonday(info.start);\n          var week_start = getDayRange(weekMonday, info.start);\n          var week_end = getDayRange(weekMonday, info.end) + 1;\n          var width_in_week = getCourseWidthWeek(week_start, week_end, weekMonday, firstDate);\n          return {\n            start: start,\n            end: end,\n            start_date: info.start,\n            text: info.name,\n            caId: info.caId,\n            userId: info.userId,\n            courseNum: info.courseNum,\n            weekWidth: width_in_week,\n            data: {\n              i: info.caId,\n              x: getWeekIndex(info.start),\n              y: index * 2,\n              w: 1,\n              h: 1\n            }\n          };\n        }));\n        return arr.concat(element.vacations.map(function (info) {\n          var start = Math.floor(getDayRange(firstDate, info.vacationStart) / 7);\n          var end = Math.floor((getDayRange(firstDate, info.vacationEnd) + 1) / 7);\n          console.log('start and end', start, end);\n          console.log(info);\n          var width = getVacationWidth(info.vacationStart, start, end, firstDate);\n          ;\n          console.log('width', width);\n          return {\n            start: start,\n            end: end,\n            start_date: info.vacationStart,\n            text: element.name + \"'s Vacation\",\n            uid: info.userId,\n            vid: info.vacationId,\n            data: {\n              i: info.userId + info.vacationId,\n              x: getWeekIndex(info.vacationStart),\n              y: index * 2 + 1,\n              w: width,\n              h: 1\n            }\n          };\n        }));\n      }, []),\n      heightLimit: heightLimit.get,\n      weekInformation: weekInformation,\n      instructorArray: newInstructorArray,\n      monthWeeks: currentMonthWeeks,\n      currentMonth: currentMonth,\n      currentDate: currentDate\n    };\n    _this.firstDate = firstDate;\n    _this.socket = socket;\n    _this.heightLimit = heightLimit;\n    _this.totalWeeks = totalWeeks;\n    _this.mWeeks = currentMonthWeeks;\n    _this.monthItems = _this.state.items.filter(function (info) {\n      var start = info.start_date;\n      // const end = info.end;\n      var width = getCourseWidth(start, _this.state.currentDate);\n      if (width === 0) {\n        return false;\n      }\n      return true;\n    });\n    _this.itemLayout = [];\n\n    // this.socket.on(\"itemChanged\", (item) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(item));\n\n    //   this.replaceItem(item);\n    // });\n\n    // this.socket.on(\"courseAdded\", (item) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(item));\n\n    //   var date = new Date(item.start);\n\n    //   var courseYear = date.getFullYear();\n\n    //   var adjustment = (courseYear - this.props.year) * 12;\n\n    //   date.setMonth(date.getMonth() - adjustment);\n\n    //   item.start = date.getTime();\n\n    //   this.onAddCourse(item, parseInt(item.x), parseInt(item.y), false);\n    // });\n\n    // this.socket.on(\"courseDeleted\", (i) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(i));\n\n    //   this.onRemoveItem(i, false);\n    // });\n\n    // this.socket.on(\"vacationApproved\", (vacation) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n    //   this.onAddVacation(vacation);\n    // });\n\n    // this.socket.on(\"vacationDeleted\", (vacation) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n    //   this.onRemoveVacation(vacation.vacation_id, false);\n    // });\n    return _this;\n  }\n  _createClass(LocalStorageLayout, [{\n    key: \"onRemoveItem\",\n    value: function onRemoveItem(i) {\n      var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      // Find the index of the course element in the state\n      var index = _.findIndex(this.state.items, function (element) {\n        return element.data.i === i;\n      });\n      var foundItem = this.state.items[index];\n\n      // Emit a message to all other applications that a course has been edeleted\n      if (emit) {\n        this.socket.emit(\"courseDeleted\", foundItem, i);\n      }\n\n      // Remove the element from the state\n      this.setState({\n        items: _.reject(this.state.items, function (element) {\n          return element.data.i === i;\n        })\n      });\n    }\n  }, {\n    key: \"onRemoveVacation\",\n    value: function onRemoveVacation(vid) {\n      var emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (emit) {\n        this.socket.emit(\"vacationDeleted\", {\n          vacation_id: vid\n        });\n      }\n\n      // Remove the element from the state\n      this.setState({\n        items: _.reject(this.state.items, function (element) {\n          return element.vid === vid;\n        })\n      });\n    }\n  }, {\n    key: \"getMonthWeekAmount\",\n    value: function getMonthWeekAmount(currentDate) {\n      var new_date = new Date(currentDate);\n      new_date.setMonth(new_date.getMonth() + 1);\n      new_date.setDate(0);\n      var last_day_of_month = new_date.getDate();\n      var week_day_index = new_date.getDay();\n      if (week_day_index === 0) {\n        week_day_index = 7;\n      }\n      var week_amount = Math.floor((last_day_of_month - week_day_index) / 7) + 1;\n      return week_amount;\n    }\n  }, {\n    key: \"createElement\",\n    value: function createElement(el) {\n      var isVacation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var layout = arguments.length > 2 ? arguments[2] : undefined;\n      var removeStyle = {\n        position: \"absolute\",\n        right: \"2px\",\n        top: 0,\n        cursor: \"pointer\",\n        padding: \"5px\",\n        color: \"black\"\n      };\n      var dsStyle = {\n        position: \"absolute\",\n        left: \"2px\",\n        bottom: 0,\n        cursor: \"pointer\",\n        padding: \"5px\",\n        color: \"black\"\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: el.data.i,\n        \"data-grid\": isVacation ? _objectSpread({}, el.data, {\n          isDraggable: false,\n          isResizable: false\n        }) : el.data,\n        name: el.text + \" el\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 9\n        }\n      }, el.text), !isVacation && ReactSession.get(\"admin\") === 1 ? /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/detailed-schedule\",\n          search: \"?courseNum=\" + el.courseNum\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"remove\",\n        style: dsStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }\n      }, \"Detailed\")) : undefined);\n    }\n  }, {\n    key: \"createItemGrid\",\n    value: function createItemGrid(props, total_weeks) {\n      var _this2 = this;\n      var ReactGridLayout = WidthProvider(RGL);\n      this.updateItems();\n      return /*#__PURE__*/React.createElement(ReactGridLayout, Object.assign({}, props, {\n        cols: total_weeks,\n        maxRows: this.state.heightLimit(),\n        layout: this.state.layout,\n        isDraggable: false,\n        isResizable: false,\n        autoSize: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 7\n        }\n      }), this.monthItems.map(function (el) {\n        return _this2.createElement(el, el.vid !== undefined ? true : false, _this2.props.currentMonthWeeks);\n      }));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.weekInformation.weekRangesArray[this.props.currentMonth].month !== prevProps.weekInformation.weekRangesArray[this.props.currentMonth].month) {\n        this.onLayoutChange(this.itemLayout);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('resize', this.resize);\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      var _this3 = this;\n      var items = [];\n      var course_lengths = {};\n      var random = this.state.items.filter(function (item) {\n        var start = item.start;\n        var end = item.end;\n        var width = getCourseWidth(item.start_date, _this3.props.currentDate);\n        if (typeof item.vid === 'number') {\n          console.log('item start_date, start, end', item.start_date, item.start, item.end);\n          width = getVacationWidth(item.start_date, item.start, item.end, _this3.props.currentDate);\n        }\n        if (width === 0) {\n          return false;\n        }\n        if (typeof item.courseNum === 'number') {\n          console.log('item', item);\n          if (item.userId in course_lengths) {\n            if (start in course_lengths[item.userId]) {\n              if (item.courseNum in course_lengths[item.userId][start]) {\n                course_lengths[item.userId][start][item.courseNum] = course_lengths[item.userId][start][item.courseNum] + item.weekWidth;\n              } else {\n                course_lengths[item.userId][start][item.courseNum] = item.weekWidth;\n              }\n            } else {\n              course_lengths[item.userId][start] = {};\n              course_lengths[item.userId][start][item.courseNum] = item.weekWidth;\n            }\n          } else {\n            course_lengths[item.userId] = {};\n            course_lengths[item.userId][start] = {};\n            course_lengths[item.userId][start][item.courseNum] = item.weekWidth;\n          }\n        }\n        return true;\n      });\n      for (var user_id in course_lengths) {\n        for (var week in course_lengths[user_id]) {\n          var course_amounts = Object.values(course_lengths[user_id][week]);\n          for (var course_num in course_lengths[user_id][week]) {\n            if (course_lengths[user_id][week][course_num] === Math.max.apply(Math, course_amounts)) {\n              course_lengths[user_id][week] = course_num;\n            } else {\n              delete course_lengths[user_id][week][course_num];\n            }\n          }\n        }\n      }\n      random = random.filter(function (item) {\n        if (typeof item.courseNum === 'number') {\n          if (item.courseNum === Number(course_lengths[item.userId][item.start])) {\n            delete course_lengths[item.userId][item.start];\n            return true;\n          } else {\n            return false;\n          }\n        } else {\n          return true;\n        }\n      });\n      random.forEach(function (element) {\n        // const width = getCourseWidth(element.start, element.end, this.props.weekInformation, this.props.weekInformation.weekRangesArray[this.props.currentMonth]);\n        var width = getCourseWidth(element.start_date, _this3.props.currentDate);\n        element.data.w = width;\n        element.data.i = element.data.i.toString();\n        element.data.maxW = _this3.props.currentMonthWeeeks;\n        items.push(element.data);\n      });\n      console.log('random', random);\n      this.monthItems = random;\n      this.itemLayout = items;\n      return items;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var total_weeks = this.getMonthWeekAmount(this.props.currentDate);\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(TimelineGrid, {\n        socket: this.socket,\n        heightLimit: this.heightLimit,\n        instructorArray: this.state.instructorArray,\n        createCourse: this.onAddCourse,\n        totalWeeks: total_weeks,\n        onRemoveUser: this.onRemoveUser,\n        onAddUser: this.onAddUser,\n        viewType: 'months',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"grid-item-container-month\",\n        style: {\n          width: total_weeks * 178,\n          position: \"absolute\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 9\n        }\n      }, this.createItemGrid(this.props, total_weeks)));\n    }\n  }]);\n  return LocalStorageLayout;\n}(React.PureComponent);\nLocalStorageLayout.defaultProps = {\n  className: \"layout\",\n  rowHeight: 100,\n  margin: [2, 2],\n  allowOverlap: true,\n  preventCollision: false,\n  resizeHandles: ['e'],\n  compactType: null,\n  autoSize: true\n};\nexport { LocalStorageLayout as default };\nfunction findWeekIndex(weekInformation, date) {\n  // Search for a week in a particular month\n  var monthIndex = date.getMonth();\n\n  // Get the first day of every week in that month\n  var weekRanges = weekInformation.weekRangesArray[monthIndex].times;\n  for (var i = 0; i < weekRanges.length; i++) {\n    if (date <= weekRanges[i].date) {\n      return weekRanges[i].index - 1;\n    }\n  }\n\n  // Return the index of the last week of the month\n  return weekRanges[weekRanges.length - 1].index;\n}\nfunction findWeekDate(weekInformation, index) {\n  return weekInformation.indexMap[index];\n}\n\n// made this new function. im sure there is a better way. \nfunction getCourseWidthWeek(start, end, currentDate, firstDate) {\n  // monday and friday = how many days they are from jan 3 2022. if the dates for monday and friday are in 2021 they are negative. \n  var _getMonFri = getMonFri(currentDate, firstDate),\n    _getMonFri2 = _slicedToArray(_getMonFri, 2),\n    monday = _getMonFri2[0],\n    friday = _getMonFri2[1]; // start and end values are in the same format as monday and friday.\n  // course is an incremented array of 'day values'\n  var course = _.range(start, end);\n  // week is an incremented array of 'day values'\n  var week = _.range(monday, friday + 1);\n  // intersect is an array of all the values the week and course share.\n  var intersection = course.filter(function (value) {\n    return week.includes(value);\n  });\n\n  // this counts the array. now you have a width\n  return intersection.length;\n}\n\n// this function gets how many days apart the current view's monday and friday are from jan 3 2022\nfunction getMonFri(currentDate, firstDate) {\n  var new_date = new Date(currentDate);\n  var monday = new_date.getDate();\n  var friday = monday + 4;\n  if (typeof firstDate !== 'undefined' && firstDate !== 'nothing :D') {\n    var new_monday = getDayRange(firstDate, currentDate);\n    var new_friday = getDayRange(firstDate, currentDate) + 4;\n    return [new_monday, new_friday];\n  } else {\n    return [monday, friday];\n  }\n}\n\n// gets the amount of days between two dates\nfunction getDayRange(d1, d2) {\n  return Math.round((d2.getTime() - d1.getTime()) / (1000 * 3600 * 24));\n}\n\n// function findWeekDateFromIndex(x, currentDate, firstDate) {\n//   const x_date = new Date(currentDate)\n//   x_date.setDate(x_date.getDate() + parseInt(x))\n\n//   return x_date\n// }\n\nfunction getWeekMonday(currentDate) {\n  var current_date = new Date(currentDate);\n  var current_date_weekday = currentDate.getDay();\n  if (current_date_weekday >= 1) {\n    current_date.setDate(currentDate.getDate() - (current_date_weekday - 1));\n  } else {\n    current_date.setDate(currentDate.getDate() - 6);\n  }\n  return current_date;\n}\nfunction getWeekDayIndex(date) {\n  if (date.getDay() == 0) {\n    return 6;\n  } else {\n    return date.getDay() - 1;\n  }\n}\nfunction getWeekIndex(date) {\n  var week_day_index = getWeekDayIndex(date);\n  var day_of_month = date.getDate();\n  if (day_of_month > week_day_index) {\n    var week_index = Math.floor((day_of_month - week_day_index - 1) / 7);\n    return week_index;\n  } else {\n    var new_date = new Date(date);\n    new_date.setDate(0);\n    var last_day_of_prev_month = new_date.getDate();\n    var _week_index = Math.floor((day_of_month + last_day_of_prev_month - week_day_index - 1) / 7);\n    return _week_index;\n  }\n}\nfunction getCourseWidth(start_date, current_date) {\n  // console.log('current_month', current_month)\n  var week_day_index = getWeekDayIndex(start_date);\n  var day_of_month = start_date.getDate();\n  var current_date_month = current_date.getMonth();\n  var current_date_year = current_date.getFullYear();\n  if (day_of_month > week_day_index && start_date.getMonth() === current_date_month && start_date.getFullYear() == current_date_year) {\n    return 1;\n  } else if (day_of_month < week_day_index && start_date.getMonth() + 1 === current_date_month && start_date.getFullYear() == current_date_year) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\nfunction getVacationWidth(start_date, start_index, end_index, current_date) {\n  var week_day_index = getWeekDayIndex(start_date);\n  var day_of_month = start_date.getDate();\n  var current_date_month = current_date.getMonth();\n  var current_date_year = current_date.getFullYear();\n  var width = end_index - start_index + 1;\n  console.log('start_date and current_date year', start_date.getFullYear(), current_date.getFullYear());\n  if (day_of_month > week_day_index && start_date.getMonth() === current_date_month && start_date.getFullYear() == current_date_year) {\n    return width;\n  } else if (day_of_month < week_day_index && start_date.getMonth() + 1 === current_date_month && start_date.getFullYear() == current_date_year) {\n    return width;\n  } else {\n    return 0;\n  }\n}","map":{"version":3,"names":["React","_","TimelineGrid","Link","ReactSession","RGL","WidthProvider","FormControlUnstyledContext","LocalStorageLayout","props","socket","heightLimit","newInstructorArray","weekInformation","totalWeeks","firstWeek","currentMonthWeeks","currentMonth","year","firstDate","currentDate","replaceItem","item","i","state","layout","length","newLayout","slice","setState","onLayoutChange","onItemChange","oldItem","newItem","startDate","findWeekDate","x","endDate","w","index","findIndex","monthItems","element","data","toString","foundItem","yAxisLockedItem","y","instructor","instructorArray","Math","floor","emit","username","key","courseNum","caId","start","getTime","end","onAddVacation","info","findWeekIndex","Date","start_date","end_date","newVacation","text","uid","vid","vacation_id","h","items","concat","onAddCourse","course","parseInt","weeklength","undefined","instructorKey","number","title","userId","onRemoveUser","initialLength","reject","console","log","reduce","acc","newElement","itemData","isDraggable","isResizable","onAddUser","user","name","firstname","lastname","timeblocks","vacations","resize","forceUpdate","timeLineInformation","weekRangesArray","arr","map","getDayRange","width","getCourseWidth","weekMonday","getWeekMonday","week_start","week_end","width_in_week","getCourseWidthWeek","weekWidth","getWeekIndex","vacationStart","vacationEnd","getVacationWidth","vacationId","get","monthWeeks","mWeeks","filter","itemLayout","new_date","setMonth","getMonth","setDate","last_day_of_month","getDate","week_day_index","getDay","week_amount","el","isVacation","removeStyle","position","right","top","cursor","padding","color","dsStyle","left","bottom","pathname","search","total_weeks","ReactGridLayout","updateItems","createElement","prevProps","prevState","month","window","addEventListener","course_lengths","random","user_id","week","course_amounts","Object","values","course_num","max","Number","forEach","maxW","currentMonthWeeeks","push","getMonthWeekAmount","createItemGrid","PureComponent","defaultProps","className","rowHeight","margin","allowOverlap","preventCollision","resizeHandles","compactType","autoSize","date","monthIndex","weekRanges","times","indexMap","getMonFri","monday","friday","range","intersection","value","includes","new_monday","new_friday","d1","d2","round","current_date","current_date_weekday","getWeekDayIndex","day_of_month","week_index","last_day_of_prev_month","current_date_month","current_date_year","getFullYear","start_index","end_index"],"sources":["/home/azureuser/sotby2.0/app/src/components/NoCollisionLayout.jsx"],"sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport TimelineGrid from \"./TimelineGrid\";\nimport { Link } from 'react-router-dom';\nimport { ReactSession } from 'react-client-session';\nimport RGL, { WidthProvider } from \"react-grid-layout\";\nimport { FormControlUnstyledContext } from \"@mui/base\";\n\nexport default class LocalStorageLayout extends React.PureComponent {\n  static defaultProps = {\n    className: \"layout\",\n    rowHeight: 100,\n    margin: [2, 2],\n    allowOverlap: true,\n    preventCollision: false,\n    resizeHandles: ['e'],\n    compactType: null,\n    autoSize: true,\n  };\n\n  constructor({ props, socket, heightLimit, newInstructorArray, weekInformation,\n    totalWeeks, firstWeek, currentMonthWeeks, currentMonth, year, firstDate, currentDate}) {\n    super(props);\n\n    let timeLineInformation = weekInformation.weekRangesArray[currentMonth];\n\n    this.state = {\n      // Loop through the instructor array to get all the courses associated with them\n      items: newInstructorArray.reduce(function (acc, element, index) {\n        if ((element.timeblocks.length === 0 && element.vacations.length === 0) || weekInformation.length === 0) {\n          return acc;\n        }\n\n        // Create a course element for every timeblock and concatenate them into one array\n        let arr = acc.concat(\n          element.timeblocks.map((info) => {\n            const start = Math.floor((getDayRange(firstDate, info.start)) / 7);\n            const end = Math.floor((getDayRange(firstDate, info.end) + 1) / 7);\n            const width = getCourseWidth(info.start, currentDate);\n            \n\n            // For finding the width of course in a week view\n            const weekMonday = getWeekMonday(info.start)\n            const week_start = getDayRange(weekMonday, info.start)\n            const week_end = getDayRange(weekMonday, info.end) + 1\n            const width_in_week = getCourseWidthWeek(week_start, week_end, weekMonday, firstDate)\n            return (\n              {\n                start: start,\n                end: end,\n                start_date: info.start,\n                text: info.name,\n                caId: info.caId,\n                userId: info.userId,\n                courseNum: info.courseNum,\n                weekWidth: width_in_week,\n                data: {\n                  i: info.caId,\n                  x: getWeekIndex(info.start),\n                  y: index * 2,\n                  w: 1,\n                  h: 1,\n                }\n              }\n            )\n          })\n        );\n\n        return arr.concat(\n          element.vacations.map((info) => {\n            const start = Math.floor((getDayRange(firstDate, info.vacationStart)) / 7);\n            const end = Math.floor((getDayRange(firstDate, info.vacationEnd) + 1) / 7);\n            console.log('start and end', start, end)\n            console.log(info)\n            const width = getVacationWidth(info.vacationStart, start, end, firstDate);;\n            console.log('width', width)\n            return (\n              {\n                start: start,\n                end: end,\n                start_date: info.vacationStart,\n                text: element.name + \"'s Vacation\",\n                uid: info.userId,\n                vid: info.vacationId,\n                data: {\n                  i: info.userId + info.vacationId,\n                  x: getWeekIndex(info.vacationStart),\n                  y: (index * 2) + 1,\n                  w: width,\n                  h: 1,\n                }\n              }\n            )\n          })\n        );\n      }, []),\n      heightLimit: heightLimit.get,\n      weekInformation: weekInformation,\n      instructorArray: newInstructorArray,\n      monthWeeks: currentMonthWeeks,\n      currentMonth: currentMonth,\n      currentDate: currentDate\n    };\n    this.firstDate = firstDate\n    this.socket = socket;\n    this.heightLimit = heightLimit;\n    this.totalWeeks = totalWeeks;\n    this.mWeeks = currentMonthWeeks;\n    this.monthItems = this.state.items.filter((info) => {\n      const start = info.start_date;\n      // const end = info.end;\n      const width = getCourseWidth(start, this.state.currentDate);\n\n      if (width === 0) {\n        return false;\n      }\n\n      return true;\n    });\n    this.itemLayout = [];\n\n    // this.socket.on(\"itemChanged\", (item) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(item));\n\n    //   this.replaceItem(item);\n    // });\n\n    // this.socket.on(\"courseAdded\", (item) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(item));\n\n    //   var date = new Date(item.start);\n\n    //   var courseYear = date.getFullYear();\n\n    //   var adjustment = (courseYear - this.props.year) * 12;\n\n    //   date.setMonth(date.getMonth() - adjustment);\n\n    //   item.start = date.getTime();\n\n    //   this.onAddCourse(item, parseInt(item.x), parseInt(item.y), false);\n    // });\n\n    // this.socket.on(\"courseDeleted\", (i) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(i));\n\n    //   this.onRemoveItem(i, false);\n    // });\n\n    // this.socket.on(\"vacationApproved\", (vacation) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n    //   this.onAddVacation(vacation);\n    // });\n\n    // this.socket.on(\"vacationDeleted\", (vacation) => {\n    //   console.log(\"Item Received: \" + JSON.stringify(vacation));\n\n    //   this.onRemoveVacation(vacation.vacation_id, false);\n    // });\n  }\n\n  replaceItem = (item) => {\n    for (let i = 0; i < this.state.layout.length; i++) {\n      if (this.state.layout[i].i === item.i) {\n        const newLayout = this.state.layout.slice();\n        newLayout[i] = item;\n\n        this.setState({\n          layout: newLayout\n        });\n\n        break;\n      }\n    }\n  }\n\n  onLayoutChange = (layout) => {\n    this.setState({\n      layout: layout\n    });\n  }\n\n  onItemChange = (layout, oldItem, newItem) => {\n    // Update the dates on the postgresql database\n    const startDate = findWeekDate(this.state.weekInformation, newItem.x);\n    const endDate = findWeekDate(this.state.weekInformation, newItem.w + newItem.x - 1);\n\n    // HTTP request instead of sockets\n    const index = _.findIndex(this.monthItems, (element) => { return element.data.i.toString() === newItem.i });\n    const foundItem = this.monthItems[index];\n\n    // Restrict movement of the course to one row only\n    const yAxisLockedItem = newItem;\n    yAxisLockedItem.y = oldItem.y;\n    this.replaceItem(yAxisLockedItem);\n\n    const instructor = this.state.instructorArray[Math.floor(newItem.y / 2)];\n    this.socket.emit('itemChanged', yAxisLockedItem, { username: instructor.key, courseNum: foundItem.courseNum, caId: foundItem.caId, start: startDate.getTime(), end: endDate.getTime() });\n  }\n\n  onAddVacation = (info) => {\n    const start = findWeekIndex(this.state.weekInformation, new Date(info.start_date));\n    const end = findWeekIndex(this.state.weekInformation, new Date(info.end_date)) + 1;\n    const index = _.findIndex(this.state.instructorArray, (element) => { return element.key === info.username });\n\n    const newVacation = {\n      text: info.username + \"'s Vacation\",\n      uid: info.username,\n      vid: info.vacation_id,\n      data: {\n        i: info.username + info.vacation_id,\n        x: start,\n        y: (index * 2) + 1,\n        w: end - start,\n        h: 1,\n      }\n    }\n\n    this.setState({\n      items: this.state.items.concat(\n        newVacation\n      )\n    });\n  }\n\n  onAddCourse = (course, x = 0, y = 0, emit = true) => {\n    const w = parseInt(course.weeklength);\n\n    const startDate = findWeekDate(this.state.weekInformation, x + this.props.firstWeek);\n    const endDate = findWeekDate(this.state.weekInformation, w + x + this.props.firstWeek);\n    const instructor = this.state.instructorArray[Math.floor(y / 2)];\n\n    const start = findWeekIndex(this.state.weekInformation, startDate);\n    const end = findWeekIndex(this.state.weekInformation, endDate);\n\n    // User/ instructor was deleted, can't create a course\n    if (instructor === undefined) {\n      return;\n    }\n\n    if (emit) {\n      this.socket.emit('courseAdded', { ...course, x: x, y: y, instructorKey: instructor.key, courseNum: course.number, start: startDate.getTime(), end: endDate.getTime() });\n    } else {\n      this.setState({\n        // Add a new item\n        items: this.state.items.concat({\n          start: start,\n          end: end,\n          text: course.title,\n          userId: instructor.key,\n          courseNum: course.number,\n          caId: course.caId,\n          data: {\n            i: course.caId,\n            x: x,\n            y: y,\n            w: w,\n            h: 1,\n          }\n        }),\n      });\n    }\n  }\n\n  onRemoveItem(i, emit = true) {\n    // Find the index of the course element in the state\n    const index = _.findIndex(this.state.items, (element) => { return element.data.i === i });\n    const foundItem = this.state.items[index];\n\n    // Emit a message to all other applications that a course has been edeleted\n    if (emit) {\n      this.socket.emit(\"courseDeleted\", foundItem, i);\n    }\n\n    // Remove the element from the state\n    this.setState({ items: _.reject(this.state.items, (element) => { return element.data.i === i }) });\n  }\n\n  onRemoveVacation(vid, emit = true) {\n    if (emit) {\n      this.socket.emit(\"vacationDeleted\", { vacation_id: vid });\n    }\n\n    // Remove the element from the state\n    this.setState({ items: _.reject(this.state.items, (element) => { return element.vid === vid }) });\n  }\n\n  onRemoveUser = (key, y) => {\n    const initialLength = this.state.instructorArray.length;\n    this.setState({ instructorArray: _.reject(this.state.instructorArray, (element) => { return element.key === key }) },\n      () => {\n        // No user/ instructor found to delete\n        if (this.state.instructorArray.length !== initialLength) {\n          // Remove elements on the same row\n          console.log(\"Removed items at: \" + y);\n          this.setState({ items: _.reject(this.state.items, (element) => { return element.data.y === y || element.data.y === y + 1 }) }\n            , () => {\n              \n              // Move course elements up if they are below the user that was deleted\n              this.setState({\n                items: _.reduce(this.state.items, (acc, element) => {\n                  if (element.data.y > y) {\n                    const newElement = element;\n                    newElement.data.y -= 2;\n                    return [...acc, newElement];\n                  } else {\n                    return [...acc, element];\n                  }\n                }, [])\n              },\n                () => {\n                  this.setState({\n                    layout: _.reduce(this.state.items, (acc, element) => {\n                      if (element.vid !== undefined) {\n                        const itemData = { ...element.data, isDraggable: false, isResizable: false };\n                        return [...acc, itemData];\n                      } else {\n                        const itemData = element.data;\n                        return [...acc, itemData];\n                      }\n                    }, [])\n                  });\n                });\n            });\n          // Reset layout so that the items are shifted up visually\n        }\n      });\n  }\n\n  onAddUser = (user) => {\n    this.setState({ instructorArray: [...this.state.instructorArray, { key: user.username, name: user.firstname + \" \" + user.lastname, timeblocks: [], vacations: [] }] });\n  }\n\n\n  getMonthWeekAmount(currentDate) {\n    const new_date = new Date(currentDate)\n    new_date.setMonth(new_date.getMonth() + 1)\n    new_date.setDate(0)\n    const last_day_of_month = new_date.getDate()\n    let week_day_index = new_date.getDay()\n    if (week_day_index === 0) {\n      week_day_index = 7\n    }\n    const week_amount = Math.floor((last_day_of_month - week_day_index) / 7) + 1\n    return week_amount\n  }\n\n\n  createElement(el, isVacation = false, layout) { \n    const removeStyle = {\n      position: \"absolute\",\n      right: \"2px\",\n      top: 0,\n      cursor: \"pointer\",\n      padding: \"5px\",\n      color: \"black\"\n    };\n    const dsStyle = {\n      position: \"absolute\",\n      left: \"2px\",\n      bottom: 0,\n      cursor: \"pointer\",\n      padding: \"5px\",\n      color: \"black\"\n    };\n\n    return (\n      <div key={el.data.i} data-grid={isVacation ? { ...el.data, isDraggable: false, isResizable: false } : el.data}\n        name={el.text + \" el\"}>\n        <span className=\"text\">{el.text}</span>\n        {!isVacation && ReactSession.get(\"admin\") === 1 ?\n          <Link\n            to={{\n              pathname: \"/detailed-schedule\",\n              search: \"?courseNum=\" + el.courseNum,\n            }}\n          >\n            <span\n              className=\"remove\"\n              style={dsStyle}\n            >\n              Detailed\n            </span>\n          </Link>\n          :\n          undefined\n        }\n      </div>\n    );\n  }\n\n  createItemGrid(props, total_weeks) {\n\n    const ReactGridLayout = WidthProvider(RGL)\n    this.updateItems();\n    return (\n      <ReactGridLayout\n        {...props}\n        cols={total_weeks}\n        maxRows={this.state.heightLimit()}\n        layout={this.state.layout}\n        isDraggable={false}\n        isResizable={false}\n        autoSize={true}\n      >\n        {this.monthItems.map(el => this.createElement(el, el.vid !== undefined ? true : false, this.props.currentMonthWeeks))}\n      </ReactGridLayout>\n    )\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.weekInformation.weekRangesArray[this.props.currentMonth].month !== prevProps.weekInformation.weekRangesArray[this.props.currentMonth].month) {\n      this.onLayoutChange(this.itemLayout);\n    }\n  }\n\n\n  resize = () => this.forceUpdate();\n\n  componentDidMount() {\n    window.addEventListener('resize', this.resize);\n  }\n\n  updateItems() {\n    var items = [];\n    \n    let course_lengths = {};\n\n    var random = this.state.items.filter((item) => {\n      const start = item.start;\n      const end = item.end;\n      let width = getCourseWidth(item.start_date, this.props.currentDate)\n      if (typeof item.vid === 'number') {\n        console.log('item start_date, start, end', item.start_date, item.start, item.end)\n        width = getVacationWidth(item.start_date, item.start, item.end, this.props.currentDate);\n      }\n      \n      if (width === 0) {\n        return false;\n      }\n      if (typeof item.courseNum === 'number') {\n        console.log('item', item)\n        if (item.userId in course_lengths) {\n          if (start in course_lengths[item.userId]) {\n            if (item.courseNum in course_lengths[item.userId][start]) {\n              course_lengths[item.userId][start][item.courseNum] = course_lengths[item.userId][start][item.courseNum] + item.weekWidth\n            } else {\n              course_lengths[item.userId][start][item.courseNum] = item.weekWidth\n            }\n          } else {\n            course_lengths[item.userId][start] = {}\n            course_lengths[item.userId][start][item.courseNum] = item.weekWidth\n          }\n        } else {\n          course_lengths[item.userId]= {}\n          course_lengths[item.userId][start] = {}\n          course_lengths[item.userId][start][item.courseNum] = item.weekWidth\n        }\n      }\n      return true;\n    })\n    \n    for (const user_id in course_lengths) {\n      \n      for (const week in course_lengths[user_id]) {\n        const course_amounts = Object.values(course_lengths[user_id][week])\n\n        for (const course_num in course_lengths[user_id][week]) {\n          if (course_lengths[user_id][week][course_num] === Math.max(...course_amounts)) {\n            course_lengths[user_id][week] = course_num\n          \n          } else {\n            delete course_lengths[user_id][week][course_num]\n          \n          }\n        }\n      }\n    }\n    \n    random = random.filter((item) => {\n      if (typeof item.courseNum === 'number') {\n        if (item.courseNum === Number(course_lengths[item.userId][item.start])) {\n          delete course_lengths[item.userId][item.start]\n          return true\n        } else {\n          return false\n        }\n      } else {\n        return true\n      }\n    })\n\n    random.forEach(element => {\n      // const width = getCourseWidth(element.start, element.end, this.props.weekInformation, this.props.weekInformation.weekRangesArray[this.props.currentMonth]);\n      const width = getCourseWidth(element.start_date, this.props.currentDate)\n      element.data.w = width;\n      element.data.i = element.data.i.toString();\n      element.data.maxW = this.props.currentMonthWeeeks;\n      items.push(element.data);\n    });\n    console.log('random', random)\n    this.monthItems = random;\n    this.itemLayout = items;\n    return items;\n  }\n\n  render() {\n    const total_weeks = this.getMonthWeekAmount(this.props.currentDate)\n    return (\n      <React.Fragment>\n        <TimelineGrid\n          socket={this.socket}\n          heightLimit={this.heightLimit}\n          instructorArray={this.state.instructorArray}\n          createCourse={this.onAddCourse}\n          totalWeeks={total_weeks}\n          onRemoveUser={this.onRemoveUser}\n          onAddUser={this.onAddUser} \n          viewType={'months'}/>\n        <div className=\"grid-item-container-month\" style={{ width: total_weeks * 178, position: \"absolute\" }}>\n          {this.createItemGrid(this.props, total_weeks)}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction findWeekIndex(weekInformation, date) {\n  // Search for a week in a particular month\n  const monthIndex = date.getMonth();\n\n  // Get the first day of every week in that month\n  const weekRanges = weekInformation.weekRangesArray[monthIndex].times;\n\n  for (let i = 0; i < weekRanges.length; i++) {\n    if (date <= weekRanges[i].date) {\n      return weekRanges[i].index - 1;\n    }\n\n  }\n\n  // Return the index of the last week of the month\n  return weekRanges[weekRanges.length - 1].index;\n}\n\nfunction findWeekDate(weekInformation, index) {\n\n  return weekInformation.indexMap[index];\n\n}\n\n// made this new function. im sure there is a better way. \nfunction getCourseWidthWeek(start, end, currentDate, firstDate) {\n  // monday and friday = how many days they are from jan 3 2022. if the dates for monday and friday are in 2021 they are negative. \n\n  let [monday, friday] = getMonFri(currentDate, firstDate)\n\n  // start and end values are in the same format as monday and friday.\n  // course is an incremented array of 'day values'\n  const course = _.range(start, end)\n  // week is an incremented array of 'day values'\n  const week = _.range(monday, friday + 1)\n  // intersect is an array of all the values the week and course share.\n  const intersection = course.filter(value => week.includes(value));\n  \n  // this counts the array. now you have a width\n  return intersection.length\n\n}\n\n\n// this function gets how many days apart the current view's monday and friday are from jan 3 2022\nfunction getMonFri(currentDate, firstDate) {\n  const new_date = new Date(currentDate)\n  const monday = new_date.getDate()\n  const friday = monday + 4\n\n  if ((typeof firstDate !== 'undefined') && (firstDate !== 'nothing :D')){\n    let new_monday = getDayRange(firstDate, currentDate)\n    let new_friday = getDayRange(firstDate, currentDate) + 4\n\n    return [new_monday, new_friday]\n  } else {\n    return [monday, friday]\n  }\n}\n\n// gets the amount of days between two dates\nfunction getDayRange(d1, d2) {\n  \n  return Math.round((d2.getTime() - d1.getTime()) / (1000 * 3600 * 24))\n}\n\n// function findWeekDateFromIndex(x, currentDate, firstDate) {\n//   const x_date = new Date(currentDate)\n//   x_date.setDate(x_date.getDate() + parseInt(x))\n  \n//   return x_date\n// }\n\nfunction getWeekMonday(currentDate) {\n  const current_date = new Date(currentDate)\n  const current_date_weekday = currentDate.getDay()\n  if (current_date_weekday >= 1) {\n    current_date.setDate(currentDate.getDate() - (current_date_weekday - 1))\n  } else {\n    current_date.setDate(currentDate.getDate() - 6)\n  }\n  return current_date\n}\n\nfunction getWeekDayIndex(date) {\n  if (date.getDay() == 0) {\n    return 6\n  } else {\n    return date.getDay() - 1\n  }\n}\n\nfunction getWeekIndex(date) {\n  const week_day_index = getWeekDayIndex(date)\n  const day_of_month = date.getDate()\n  if (day_of_month > week_day_index) {\n    const week_index = Math.floor((day_of_month - week_day_index - 1) / 7)\n    return week_index\n  } else {\n    const new_date = new Date(date)\n    new_date.setDate(0)\n    const last_day_of_prev_month = new_date.getDate()\n    const week_index = Math.floor((day_of_month + last_day_of_prev_month - week_day_index - 1) / 7)\n    return week_index\n  }\n}\n\nfunction getCourseWidth(start_date, current_date) {\n  // console.log('current_month', current_month)\n  const week_day_index = getWeekDayIndex(start_date)\n  const day_of_month = start_date.getDate()\n  const current_date_month = current_date.getMonth()\n  const current_date_year = current_date.getFullYear()\n  if (day_of_month > week_day_index && \n      start_date.getMonth() === current_date_month &&\n      start_date.getFullYear() == current_date_year) {\n\n    return 1\n  } else if (day_of_month < week_day_index && start_date.getMonth() + 1 === current_date_month &&\n              start_date.getFullYear() == current_date_year) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nfunction getVacationWidth(start_date, start_index, end_index, current_date) {\n  const week_day_index = getWeekDayIndex(start_date)\n  const day_of_month = start_date.getDate()\n  const current_date_month = current_date.getMonth()\n  const current_date_year = current_date.getFullYear()\n  const width = end_index - start_index + 1\n  console.log('start_date and current_date year', start_date.getFullYear(), current_date.getFullYear())\n  if (day_of_month > week_day_index && \n    start_date.getMonth() === current_date_month &&\n    start_date.getFullYear() == current_date_year) {\n    \n    return width\n\n  } else if (day_of_month < week_day_index && start_date.getMonth() + 1 === current_date_month &&\n    start_date.getFullYear() == current_date_year) {\n    return width\n\n  } else {\n    return 0\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}